<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[lkdjiin's blog]]></title>
  <link href="http://lkdjiin.github.io/atom.xml" rel="self"/>
  <link href="http://lkdjiin.github.io/"/>
  <updated>2013-08-04T09:44:38+02:00</updated>
  <id>http://lkdjiin.github.io/</id>
  <author>
    <name><![CDATA[Xavier Nayrac]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Liste des abréviations de langages pour Pygments]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/08/04/liste-des-abreviations-de-langages-pour-pygments/"/>
    <updated>2013-08-04T09:26:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/08/04/liste-des-abreviations-de-langages-pour-pygments</id>
    <content type="html"><![CDATA[<p>La bibliothèque <a href="https://github.com/tmm1/pygments.rb">pygments.rb</a>
est un <em>wrapper</em> Ruby pour
<a href="http://pygments.org/">pygments</a>,
un <em>syntax highlighter</em> écrit en Python. J&#8217;ai cherché une liste des
abréviations supportées par l&#8217;application, sans la trouver. Je suis étonné
qu&#8217;une telle liste n&#8217;existe pas. J&#8217;ai peut-être mal cherché… Quoiqu&#8217;il en
soit voici cette liste, elle sera peut-être utile à quelqu&#8217;un d&#8217;autre:</p>

<!-- more -->


<pre><code>ABAP                      ["abap"]
ANTLR                     ["antlr"]
ANTLR With ActionScript Target ["antlr-as", "antlr-actionscript"]
ANTLR With C# Target      ["antlr-csharp", "antlr-c#"]
ANTLR With CPP Target     ["antlr-cpp"]
ANTLR With Java Target    ["antlr-java"]
ANTLR With ObjectiveC Target ["antlr-objc"]
ANTLR With Perl Target    ["antlr-perl"]
ANTLR With Python Target  ["antlr-python"]
ANTLR With Ruby Target    ["antlr-ruby", "antlr-rb"]
ActionScript              ["as", "actionscript"]
ActionScript 3            ["as3", "actionscript3"]
Ada                       ["ada", "ada95ada2005"]
ApacheConf                ["apacheconf", "aconf", "apache"]
AppleScript               ["applescript"]
AspectJ                   ["aspectj"]
Asymptote                 ["asy", "asymptote"]
Awk                       ["awk", "gawk", "mawk", "nawk"]
BBCode                    ["bbcode"]
BUGS                      ["bugs", "winbugs", "openbugs"]
Base Makefile             ["basemake"]
Bash                      ["bash", "sh", "ksh"]
Bash Session              ["console"]
Batchfile                 ["bat"]
Befunge                   ["befunge"]
BlitzMax                  ["blitzmax", "bmax"]
Boo                       ["boo"]
Brainfuck                 ["brainfuck", "bf"]
Bro                       ["bro"]
C                         ["c"]
C#                        ["csharp", "c#"]
C++                       ["cpp", "c++"]
CFEngine3                 ["cfengine3", "cf3"]
CMake                     ["cmake"]
CSS                       ["css"]
CSS+Django/Jinja          ["css+django", "css+jinja"]
CSS+Genshi Text           ["css+genshitext", "css+genshi"]
CSS+Lasso                 ["css+lasso"]
CSS+Mako                  ["css+mako"]
CSS+Myghty                ["css+myghty"]
CSS+PHP                   ["css+php"]
CSS+Ruby                  ["css+erb", "css+ruby"]
CSS+Smarty                ["css+smarty"]
CUDA                      ["cuda", "cu"]
Ceylon                    ["ceylon"]
Cheetah                   ["cheetah", "spitfire"]
Clojure                   ["clojure", "clj"]
CoffeeScript              ["coffee-script", "coffeescript"]
Coldfusion HTML           ["cfm"]
Common Lisp               ["common-lisp", "cl"]
Coq                       ["coq"]
Croc                      ["croc"]
Cython                    ["cython", "pyx"]
D                         ["d"]
DTD                       ["dtd"]
Darcs Patch               ["dpatch"]
Dart                      ["dart"]
Debian Control file       ["control"]
Debian Sourcelist         ["sourceslist", "sources.list"]
Delphi                    ["delphi", "pas", "pascal", "objectpascal"]
Diff                      ["diff", "udiff"]
Django/Jinja              ["django", "jinja"]
Duel                      ["duel", "Duel Engine", "Duel View", "JBST", "jbst", "JsonML+BST"]
Dylan                     ["dylan"]
ECL                       ["ecl"]
ERB                       ["erb"]
Elixir                    ["elixir", "ex", "exs"]
Elixir iex session        ["iex"]
Embedded Ragel            ["ragel-em"]
Erlang                    ["erlang"]
Erlang erl session        ["erl"]
Evoque                    ["evoque"]
FSharp                    ["fsharp"]
Factor                    ["factor"]
Fancy                     ["fancy", "fy"]
Fantom                    ["fan"]
Felix                     ["felix", "flx"]
Fortran                   ["fortran"]
GAS                       ["gas"]
GLSL                      ["glsl"]
Genshi                    ["genshi", "kid", "xml+genshi", "xml+kid"]
Genshi Text               ["genshitext"]
Gettext Catalog           ["pot", "po"]
Gherkin                   ["Cucumber", "cucumber", "Gherkin", "gherkin"]
Gnuplot                   ["gnuplot"]
Go                        ["go"]
GoodData-CL               ["gooddata-cl"]
Gosu                      ["gosu"]
Gosu Template             ["gst"]
Groff                     ["groff", "nroff", "man"]
Groovy                    ["groovy"]
HTML                      ["html"]
HTML+Cheetah              ["html+cheetah", "html+spitfire"]
HTML+Django/Jinja         ["html+django", "html+jinja"]
HTML+Evoque               ["html+evoque"]
HTML+Genshi               ["html+genshi", "html+kid"]
HTML+Lasso                ["html+lasso"]
HTML+Mako                 ["html+mako"]
HTML+Myghty               ["html+myghty"]
HTML+PHP                  ["html+php"]
HTML+Smarty               ["html+smarty"]
HTML+Velocity             ["html+velocity"]
HTTP                      ["http"]
Haml                      ["haml", "HAML"]
Haskell                   ["haskell", "hs"]
Hybris                    ["hybris", "hy"]
INI                       ["ini", "cfg"]
IRC logs                  ["irc"]
Io                        ["io"]
Ioke                      ["ioke", "ik"]
JAGS                      ["jags"]
JSON                      ["json"]
Jade                      ["jade", "JADE"]
Java                      ["java"]
Java Server Page          ["jsp"]
JavaScript                ["js", "javascript"]
JavaScript+Cheetah        ["js+cheetah", "javascript+cheetah", "js+spitfire", "javascript+spitfire"]
JavaScript+Django/Jinja   ["js+django", "javascript+django", "js+jinja", "javascript+jinja"]
JavaScript+Genshi Text    ["js+genshitext", "js+genshi", "javascript+genshitext", "javascript+genshi"]
JavaScript+Lasso          ["js+lasso", "javascript+lasso"]
JavaScript+Mako           ["js+mako", "javascript+mako"]
JavaScript+Myghty         ["js+myghty", "javascript+myghty"]
JavaScript+PHP            ["js+php", "javascript+php"]
JavaScript+Ruby           ["js+erb", "javascript+erb", "js+ruby", "javascript+ruby"]
JavaScript+Smarty         ["js+smarty", "javascript+smarty"]
Julia                     ["julia", "jl"]
Julia console             ["jlcon"]
Kconfig                   ["kconfig", "menuconfig", "linux-config", "kernel-config"]
Koka                      ["koka"]
Kotlin                    ["kotlin"]
LLVM                      ["llvm"]
Lasso                     ["lasso", "lassoscript"]
Lighttpd configuration file ["lighty", "lighttpd"]
Literate Haskell          ["lhs", "literate-haskell"]
LiveScript                ["live-script", "livescript"]
Logtalk                   ["logtalk"]
Lua                       ["lua"]
MAQL                      ["maql"]
MOOCode                   ["moocode"]
MXML                      ["mxml"]
Makefile                  ["make", "makefile", "mf", "bsdmake"]
Mako                      ["mako"]
Mason                     ["mason"]
Matlab                    ["matlab"]
Matlab session            ["matlabsession"]
MiniD                     ["minid"]
Modelica                  ["modelica"]
Modula-2                  ["modula2", "m2"]
MoinMoin/Trac Wiki markup ["trac-wiki", "moin"]
Monkey                    ["monkey"]
MoonScript                ["moon", "moonscript"]
Mscgen                    ["mscgen", "msc"]
MuPAD                     ["mupad"]
MySQL                     ["mysql"]
Myghty                    ["myghty"]
NASM                      ["nasm"]
Nemerle                   ["nemerle"]
NewLisp                   ["newlisp"]
Newspeak                  ["newspeak"]
Nginx configuration file  ["nginx"]
Nimrod                    ["nimrod", "nim"]
NumPy                     ["numpy"]
OCaml                     ["ocaml"]
Objective-C               ["objective-c", "objectivec", "obj-c", "objc"]
Objective-J               ["objective-j", "objectivej", "obj-j", "objj"]
Octave                    ["octave"]
Ooc                       ["ooc"]
Opa                       ["opa"]
OpenEdge ABL              ["openedge", "abl", "progress"]
PHP                       ["php", "php3", "php4", "php5"]
PL/pgSQL                  ["plpgsql"]
POVRay                    ["pov"]
Perl                      ["perl", "pl"]
PostScript                ["postscript"]
PostgreSQL SQL dialect    ["postgresql", "postgres"]
PostgreSQL console (psql) ["psql", "postgresql-console", "postgres-console"]
PowerShell                ["powershell", "posh", "ps1"]
Prolog                    ["prolog"]
Properties                ["properties"]
Protocol Buffer           ["protobuf"]
PyPy Log                  ["pypylog", "pypy"]
Python                    ["python", "py", "sage"]
Python 3                  ["python3", "py3"]
Python 3.0 Traceback      ["py3tb"]
Python Traceback          ["pytb"]
Python console session    ["pycon"]
RConsole                  ["rconsole", "rout"]
REBOL                     ["rebol"]
RHTML                     ["rhtml", "html+erb", "html+ruby"]
Racket                    ["racket", "rkt"]
Ragel                     ["ragel"]
Ragel in C Host           ["ragel-c"]
Ragel in CPP Host         ["ragel-cpp"]
Ragel in D Host           ["ragel-d"]
Ragel in Java Host        ["ragel-java"]
Ragel in Objective C Host ["ragel-objc"]
Ragel in Ruby Host        ["ragel-ruby", "ragel-rb"]
Raw token data            ["raw"]
Rd                        ["rd"]
Redcode                   ["redcode"]
RobotFramework            ["RobotFramework", "robotframework"]
Ruby                      ["rb", "ruby", "duby"]
Ruby irb session          ["rbcon", "irb"]
Rust                      ["rust"]
S                         ["splus", "s", "r"]
SCSS                      ["scss"]
SQL                       ["sql"]
Sass                      ["sass", "SASS"]
Scala                     ["scala"]
Scalate Server Page       ["ssp"]
Scaml                     ["scaml", "SCAML"]
Scheme                    ["scheme", "scm"]
Scilab                    ["scilab"]
Smali                     ["smali"]
Smalltalk                 ["smalltalk", "squeak"]
Smarty                    ["smarty"]
Snobol                    ["snobol"]
SourcePawn                ["sp"]
SquidConf                 ["squidconf", "squid.conf", "squid"]
Stan                      ["stan"]
Standard ML               ["sml"]
Tcl                       ["tcl"]
Tcsh                      ["tcsh", "csh"]
TeX                       ["tex", "latex"]
Tea                       ["tea"]
Text only                 ["text"]
Treetop                   ["treetop"]
UrbiScript                ["urbiscript"]
VB.net                    ["vb.net", "vbnet"]
VGL                       ["vgl"]
Vala                      ["vala", "vapi"]
Velocity                  ["velocity"]
VimL                      ["vim"]
XML                       ["xml"]
XML+Cheetah               ["xml+cheetah", "xml+spitfire"]
XML+Django/Jinja          ["xml+django", "xml+jinja"]
XML+Evoque                ["xml+evoque"]
XML+Lasso                 ["xml+lasso"]
XML+Mako                  ["xml+mako"]
XML+PHP                   ["xml+php"]
XML+Ruby                  ["xml+erb", "xml+ruby"]
XML+Smarty                ["xml+smarty"]
XML+Velocity              ["xml+velocity"]
XQuery                    ["xquery", "xqy", "xq", "xql", "xqm"]
XSLT                      ["xslt"]
Xtend                     ["xtend"]
YAML                      ["yaml"]
aspx-cs                   ["aspx-cs"]
aspx-vb                   ["aspx-vb"]
autohotkey                ["ahk"]
c-objdump                 ["c-objdump"]
cfstatement               ["cfs"]
cpp-objdump               ["cpp-objdump", "c++-objdumb", "cxx-objdump"]
d-objdump                 ["d-objdump"]
dg                        ["dg"]
eC                        ["ec"]
haXe                      ["hx", "haXe"]
objdump                   ["objdump"]
reStructuredText          ["rst", "rest", "restructuredtext"]
reg                       []
sqlite3con                ["sqlite3"]
systemverilog             ["sv"]
verilog                   ["v"]
vhdl                      ["vhdl"]
</code></pre>

<p>Et pour les curieux, voici comment l&#8217;obtenir:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="nb">require</span> <span class="s1">&#39;pygments&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="no">Pygments</span><span class="o">.</span><span class="n">lexers</span><span class="o">.</span><span class="n">sort</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span>
</span><span class='line'>  <span class="nb">puts</span> <span class="s2">&quot;%-25s &quot;</span> <span class="o">%</span> <span class="n">e</span><span class="o">[</span><span class="mi">1</span><span class="o">][</span><span class="ss">:name</span><span class="o">]</span> <span class="o">+</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">e</span><span class="o">[</span><span class="mi">1</span><span class="o">][</span><span class="ss">:aliases</span><span class="o">]</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Implémenter un langage sur la machine virtuelle Parrot: partie 3]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/08/03/implementer-un-langage-sur-la-machine-virtuelle-parrot-partie-3/"/>
    <updated>2013-08-03T08:16:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/08/03/implementer-un-langage-sur-la-machine-virtuelle-parrot-partie-3</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-2'>Niveau : <span>intermédiaire</span></div>


<p>Après avoir vu
<a href="http://lkdjiin.github.io/blog/2013/08/02/implementer-un-langage-sur-la-machine-virtuelle-parrot-partie-2/">l&#8217;installation de Parrot</a>,
il est temps d&#8217;écrire
notre premier programme en PIR. On va réaliser une version simpliste
d&#8217;une fonction qui renvoie le signe d&#8217;un nombre entier. On oublie
momentanément l&#8217;existence du zéro pour n&#8217;avoir que deux cas à traiter:
positif ou négatif.</p>

<pre><code>simple_sign(n) = 1 si n &gt; 0
simple_sign(n) = -1 sinon
</code></pre>

<!-- more -->


<h2>La procédure simple_sign</h2>

<p>Voici un programme PIR qui fait ça:</p>

<figure class='code'><figcaption><span>simple_sign.pir</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
</pre></td><td class='code'><pre><code class='gas'><span class='line'><span class="na">.sub</span> <span class="no">simple_sign</span>
</span><span class='line'>  <span class="na">.param</span> <span class="no">int</span> <span class="no">n</span>
</span><span class='line'>
</span><span class='line'>  <span class="na">.local</span> <span class="no">int</span> <span class="no">result</span>
</span><span class='line'>
</span><span class='line'>  <span class="nf">if</span> <span class="no">n</span> <span class="err">&gt;</span> <span class="mi">0</span> <span class="no">goto</span> <span class="no">POSITIVE</span>
</span><span class='line'>
</span><span class='line'>  <span class="nf">result</span> <span class="err">=</span> <span class="p">-</span><span class="mi">1</span>
</span><span class='line'>  <span class="nf">goto</span> <span class="no">RETURN</span>
</span><span class='line'>
</span><span class='line'><span class="nl">POSITIVE:</span>
</span><span class='line'>  <span class="nf">result</span> <span class="err">=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'><span class="nl">RETURN:</span>
</span><span class='line'>  <span class="na">.return</span><span class="p">(</span><span class="no">result</span><span class="p">)</span>
</span><span class='line'><span class="na">.end</span>
</span><span class='line'>
</span><span class='line'><span class="na">.sub</span> <span class="no">main</span> <span class="p">:</span><span class="no">main</span>
</span><span class='line'>  <span class="na">.local</span> <span class="no">int</span> <span class="no">f</span>
</span><span class='line'>  <span class="nf">f</span> <span class="err">=</span> <span class="no">simple_sign</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</span><span class='line'>  <span class="nf">say</span> <span class="no">f</span>
</span><span class='line'><span class="na">.end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Pour le lancer:</p>

<pre><code>parrot simple_sign.pir
</code></pre>

<p>Comme c&#8217;est de l&#8217;assembleur, le plus simple est d&#8217;expliquer les lignes de
code une par une.</p>

<pre><code>.sub simple_sign
</code></pre>

<p>C&#8217;est la définition d&#8217;une procédure <code>simple_sign</code>.</p>

<pre><code>.param int n
</code></pre>

<p>On signale à l&#8217;assembleur que notre fonction <code>simple_sign</code> prend un
argument de type <code>int</code> et qu&#8217;on souhaite s&#8217;y réferer
par la suite à l&#8217;aide du nom <code>n</code>. Ça ressemble donc fortement à une
déclaration de variable.</p>

<pre><code>.local int result
</code></pre>

<p>Cette fois on déclare une variable locale nommée. Elle est de type <code>int</code> et
on pourra s&#8217;y réferer avec le nom <code>result</code>.</p>

<pre><code>if n &gt; 0 goto POSITIVE
</code></pre>

<p>Littéralement: Si la valeur de n est supérieur à zéro, sauter à l&#8217;adresse
réferencée par le label POSITIVE. Le saut conditionnel ou non est la seule
instruction de branchement dont on dispose avec PIR. Vous avez surement
appris que «goto c&#8217;est mal !». Oubliez le:</p>

<blockquote><p>En assembleur, goto est normal.</p></blockquote>


<p>Et c&#8217;est souvent la seule façon d&#8217;obtenir le résultat voulu.</p>

<pre><code>result = -1
</code></pre>

<p>Voilà comment affecter une valeur.</p>

<pre><code>goto RETURN
</code></pre>

<p>Voilà un saut inconditionnel vers l&#8217;adresse réferencée par le label
RETURN.</p>

<pre><code>POSITIVE:
  result = 1
</code></pre>

<p><code>POSITIVE:</code> définit une adresse. Chaque fois qu&#8217;on écrit <code>goto POSITIVE</code>, le
programme débranche à cette adresse (en fait à la ligne de code suivante).
Notez qu&#8217;on peut écrire les deux lignes précédentes en une seule :
<code>POSITIVE: result = 1</code>.</p>

<pre><code>RETURN:
  .return(result)
</code></pre>

<p>Définition du label RETURN puis renvoi du résultat avec la directive
<code>.return</code>. Les instructions qui commencent par un <code>.</code> sont des directives.
Ce qui veut dire qu&#8217;elles seront remplacées dans notre dos par plusieurs
instructions de plus bas niveau.</p>

<pre><code>.end
</code></pre>

<p>Fin de notre procédure <code>simple_sign</code>.</p>

<pre><code>.sub main :main
</code></pre>

<p>Nouvelle procédure, nommée <code>main</code>. Le <code>:main</code> dit à Parrot que c&#8217;est cette
procédure qu&#8217;il faut lancer à l&#8217;ouverture du programme. Si on ne le fait
pas, Parrot lance la première procédure qu&#8217;il rencontre.</p>

<pre><code>.local int f
f = simple_sign(4)
say f
.end
</code></pre>

<p>La fin du programme se comprend maintenant facilement.</p>

<p>Voilà, si vous avez déjà travaillé en assembleur, la syntaxe PIR ne
devrait pas vous poser de problèmes particuliers car c&#8217;est un
assembleur de plutôt haut niveau ; par exemple on n&#8217;a pas encore eu
besoin de manipuler directement les registres. Si au contraire c&#8217;est
votre première rencontre avec un assembleur, vous allez devoir apprendre
à décomposer vos actions/pensées. Par exemple vous pourriez être tenté
d&#8217;écrire la procédure <code>main</code> de cette façon:</p>

<pre><code>.sub main :main
  say simple_sign(4)
.end
</code></pre>

<p>Mais ça ne marcheras pas, il faut décomposer…</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Implémenter un langage sur la machine virtuelle Parrot: partie 2]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/08/02/implementer-un-langage-sur-la-machine-virtuelle-parrot-partie-2/"/>
    <updated>2013-08-02T09:07:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/08/02/implementer-un-langage-sur-la-machine-virtuelle-parrot-partie-2</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-2'>Niveau : <span>intermédiaire</span></div>


<p><em>Aujourd&#8217;hui je m&#8217;intéresse à</em>
<a href="http://www.parrot.org/">Parrot</a>.
<em>Après une brève description de cette
machine virtuelle, on l&#8217;installe et on écrit un premier programme.</em></p>

<!-- more -->


<h2>Présentation de Parrot</h2>

<p>La machine virtuelle Parrot offre un nombre illimité de registre,
qui sont de 4 types différents:</p>

<ul>
<li>Integer, pour les nombres entiers</li>
<li>Number, pour les nombres réels</li>
<li>String, pour les chaînes de caractères</li>
<li>PMC, pour, en gros, les objets (Polymorphic container)</li>
</ul>


<p>Les instructions peuvent être entrées sous 4 formes différentes, du plus
haut-niveau vers le plus bas:</p>

<ol>
<li>PIR, <em>Parrot Intermediate Representation</em>, qui ressemble à un assembleur
de haut-niveau.</li>
<li>PASM, <em>Parrot Assembly</em>, qui est un assembleur classique, sans fioritures.</li>
<li>PAST, <em>Parrot Abstract Syntax Tree</em>, qui accepte un
<a href="http://en.wikipedia.org/wiki/Abstract_syntax_tree">AST</a> en entrée.</li>
<li>PBC, <em>Parrot Byte Code</em>, le code machine de Parrot.</li>
</ol>


<p>Est-ce-que j&#8217;ai vraiment besoin de dire que, si possible, je me limiterais
à PIR ?</p>

<p>Enfin, Parrot possède un
<a href="http://fr.wikipedia.org/wiki/Ramasse-miettes_%28informatique%29">Garbage Collector</a>.
On aura pas besoin de s&#8217;acharner
à libérer la mémoire, Parrot le fait pour nous.</p>

<h2>Installation de Parrot</h2>

<p>Avant de pouvoir jouer avec Parrot, il faut l&#8217;installer.
Le point de départ est sur
<a href="http://www.parrot.org/source.html">www.parrot.org/source.html</a>.
Sur ma machine Debian, j&#8217;ai d&#8217;abord installé la version de Parrot qui se
trouve dans les dépots. Le problème c&#8217;est que pas mal d&#8217;outils annexes
demandent à avoir un <em>working repository</em>, ils ne sont pas inclus dans les
paquets. De plus, les sources ont l&#8217;air de contenir pas mal d&#8217;exemples.
J&#8217;ai donc désinstallé le package pour Debian et rapatrié les sources depuis
Github : <a href="https://github.com/parrot/parrot">github.com/parrot/parrot</a>.
L&#8217;installation s&#8217;est déroulée sans soucis particuliers. Comme je trouve la
documentation un peu confuse sur ce point, voilà comment j&#8217;ai fait ; si ça
peut vous éviter de chercher…</p>

<pre><code>perl Configure.pl
make
make test
sudo make install
</code></pre>

<h2>Hello Parrot</h2>

<p>On s&#8217;attaque enfin à l&#8217;écriture du classique <em>hello world</em>:</p>

<figure class='code'><figcaption><span>hello.pir</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='nasm'><span class='line'><span class="nf">.sub</span> <span class="nv">main</span>
</span><span class='line'>  <span class="nf">say</span> <span class="s">&quot;Hello world&quot;</span>
</span><span class='line'><span class="nf">.end</span>
</span></code></pre></td></tr></table></div></figure>


<p>On le lance ainsi:</p>

<pre><code>parrot hello.pir
</code></pre>

<p>Maintenant que Parrot est installé et fonctionnel, on va pouvoir écrire quelques
petits programmes en PIR.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Implémenter un langage sur la machine virtuelle Parrot: partie 1]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/08/01/implementer-un-langage-sur-la-machine-virtuelle-parrot-partie-1/"/>
    <updated>2013-08-01T07:59:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/08/01/implementer-un-langage-sur-la-machine-virtuelle-parrot-partie-1</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-2'>Niveau : <span>intermédiaire</span></div>


<p>Cela fait quelques années que j&#8217;ai envie d&#8217;essayer la
<a href="https://fr.wikipedia.org/wiki/Machine_virtuelle">machine virtuelle</a>
<a href="http://www.parrot.org/">Parrot</a> et j&#8217;ai toujours reporté à plus tard.
Jusqu&#8217;à maintenant. Aujourd&#8217;hui, je commence à écrire un
<a href="http://en.wikipedia.org/wiki/Toy_language">toy language</a>
qui tournera sur Parrot.</p>

<p>Pour implémenter un langage sur Parrot, il faut d&#8217;abord … un langage.
Simple de préférence, avec peu de fonctionnalités, au moins pour
démarrer.
Je vais en inventer un pour l&#8217;occasion, ce qui sera bien plus drôle que
d&#8217;utiliser un sous-ensemble d&#8217;un langage déjà existant.</p>

<!-- more -->


<h2>Le langage naam</h2>

<p>Naam signifie No Assignment, Automatic Memoization.
Je rappelle qu&#8217;il s&#8217;agit d&#8217;un <em>toy language</em>, l&#8217;objectif étant
d&#8217;expérimenter, et non de produire le prochain succès planétaire.
Pour le moment, et peut-être pour toujours, le langage sera limité
à l&#8217;utilisation des nombres entiers. Pas de nombres à virgule, pas de
chaînes, pas d&#8217;objets… Je viens de passer quelques jours à envisager
une syntaxe. Mais la reflexion n&#8217;est pas terminée et elle pourrait
changer d&#8217;ici à l&#8217;implémentation de naam. Voici des exemples:</p>

<pre><code>sign(n)=
1  if n &gt; 0
-1 if n &lt; 0
0  else

print sign(3)
</code></pre>

<p>Les détails:</p>

<pre><code>sign(n)=
</code></pre>

<p>C&#8217;est la définition d&#8217;une fonction <code>sign</code>.</p>

<pre><code>1  if n &gt; 0
-1 if n &lt; 0
</code></pre>

<p>Si <code>n</code> est positif on renvoie 1. Si <code>n</code> est négatif on renvoie -1.</p>

<pre><code>0  else
</code></pre>

<p>Dans les autres cas (il reste le cas du zéro) on renvoie 0. Le mot <code>else</code>
marque aussi la fin de la fonction.</p>

<p>Voici maintenant ce que pourrait être la fonction factorielle:</p>

<pre><code>!(n)=
1            if 0
n * .(n - 1) if n &gt; 0
else

print !(7)
</code></pre>

<p>Et le détail:</p>

<pre><code>!(n)=
</code></pre>

<p>On définit la fonction <code>!</code>. Le nom d&#8217;une fonction n&#8217;a pas à être composé
de lettres. Des signes font aussi bien l&#8217;affaire.</p>

<pre><code>1            if 0
</code></pre>

<p>Quand l&#8217;argument vaut zéro, on renvoie 1.</p>

<pre><code>n * .(n - 1) if n &gt; 0
</code></pre>

<p>Dans les cas où <code>n</code> est positif, on renvoie <code>n</code> multiplié
par la factorielle de <code>n - 1</code>.
Le point (<code>.</code>) signifie «la fonction elle-même».</p>

<pre><code>else
</code></pre>

<p>Enfin, dans les autres cas (qui ici sont <code>n</code> est négatif) on renvoie du
vide, rien, nada. Comme une fonction est dans l&#8217;obligation de renvoyer
une valeur, cela provoquera une erreur (ce qui est voulu).</p>

<p>Un dernier exemple pour terminer, la fonction d&#8217;Ackermann. Je ne vais pas
la commenter, la seule différence avec ce que j&#8217;ai montré avant est
qu&#8217;il y a deux arguments :</p>

<pre><code>ackermann(m, n)=
n + 1                 if 0, n
.(m - 1, 1)           if m &gt; 0, 0
.(m - 1, .(m, n - 1)) else

print ackermann(2, 3)
</code></pre>

<p>On pourrait aussi écrire la même fonction de la manière suivante (je n&#8217;ai
pas encore décidé si naam supporterait les deux syntaxes ou non):</p>

<pre><code>ackermann(0, n)     = n + 1
ackermann(m &gt; 0, 0) = .(m - 1, 1)
ackermann(m, n)     = .(m - 1, .(m, n - 1))
</code></pre>

<p>Alors, qu&#8217;en pensez vous. Est-ce-que ça vous dit de voir naître un
<em>toy language</em> au jour le jour ? Que pensez vous de naam ?</p>

<p>La prochaine fois on installe Parrot et on joue un peu avec pour sentir le truc.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Bien débuter avec Vim: conseil numéro sept]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/31/bien-debuter-avec-vim-conseil-numero-sept/"/>
    <updated>2013-07-31T10:05:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/31/bien-debuter-avec-vim-conseil-numero-sept</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<h2>Lisez et utilisez la documentation</h2>

<p>La documentation de Vim est énorme. Elle comporte plusieurs
dizaines de chapitres répartis sur deux manuels: le manuel utilisateur
et le manuel de référence. On y accède avec la touche F1.
La documentation est complète et accessible pour tous les niveaux.
Dans l&#8217;idéal, vous devriez la lire entièrement…</p>

<!-- more -->


<p>Alors je ne suis pas naïf et
je sais bien que vous ne le ferez pas. Moi même je ne l&#8217;ai évidemment pas fait.
Je dis juste ce que devrait être l&#8217;idéal.</p>

<p>Pour rester réaliste, dans un premier
temps, parcourez la documentation entièrement mais en diagonale. Vite fait.
Simplement pour savoir où trouver quoi.
Donnez vous un objectif simple, comme un chapitre par jour.
N&#8217;apprenez rien par coeur. Prenez plutôt des notes
quand vous tombez sur un truc qui vous plait.
Parcourir un seul chapitre en diagonale tout en jetant quelques notes
sur une feuille de papier vous prendra entre 5 et 10 minutes.</p>

<p>Dans un second temps, essayez d&#8217;étudier à fond au moins les deux premières
parties du manuel utilisateur:
<em>Getting Started</em> et <em>Editing Effectively</em>.
Cette fois ci, il n&#8217;est plus question de lire en diagonale, mais bien
d&#8217;étudier la bête.</p>

<p>Lire, apprendre, comprendre et digérer la documentation de Vim vous prendra
beaucoup de temps. Certainement
des mois. Au minimum. C&#8217;est une bonne raison pour vous y mettre dès
aujourd&#8217;hui.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Comment écrire un plugin Octopress - partie 2]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/30/comment-ecrire-un-plugin-octopress-partie-2/"/>
    <updated>2013-07-30T08:18:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/30/comment-ecrire-un-plugin-octopress-partie-2</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>Dans <a href="http://lkdjiin.github.io/blog/2013/07/27/comment-ecrire-un-plugin-octopress/">la première partie</a>,
je m&#8217;étais arrêté sur le code suivant:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">LevelTag</span> <span class="o">&lt;</span> <span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Tag</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tagname</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
</span><span class='line'>      <span class="vi">@level</span> <span class="o">=</span> <span class="n">level</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class='line'>      <span class="s2">&quot;Niveau : </span><span class="si">#{</span><span class="vi">@level</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Template</span><span class="o">.</span><span class="n">register_tag</span><span class="p">(</span><span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="ss">Jekyll</span><span class="p">:</span><span class="ss">:LevelTag</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Aujourd&#8217;hui je montre comment permettre à l&#8217;utilisateur de personnaliser
le contenu du code Html produit.</p>

<!-- more -->


<p>Tout d&#8217;abord, voici le code du plugin terminé. Je vous rappelle que vous
pouvez trouver <a href="https://github.com/lkdjiin/octopress-level-tag">ce plugin sur Github</a>.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">LevelTag</span> <span class="o">&lt;</span> <span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Tag</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tagname</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
</span><span class='line'>      <span class="vi">@level</span> <span class="o">=</span> <span class="n">level</span><span class="o">.</span><span class="n">strip</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class='line'>      <span class="n">config</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span>
</span><span class='line'>      <span class="n">label</span> <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;level_tag_level&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s2">&quot;Level: &quot;</span>
</span><span class='line'>      <span class="n">level</span> <span class="o">=</span> <span class="k">case</span> <span class="vi">@level</span>
</span><span class='line'>      <span class="k">when</span> <span class="s2">&quot;1&quot;</span> <span class="k">then</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;level_tag_level_1&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s2">&quot;easy&quot;</span>
</span><span class='line'>      <span class="k">when</span> <span class="s2">&quot;2&quot;</span> <span class="k">then</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;level_tag_level_2&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s2">&quot;medium&quot;</span>
</span><span class='line'>      <span class="k">when</span> <span class="s2">&quot;3&quot;</span> <span class="k">then</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;level_tag_level_3&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s2">&quot;hard&quot;</span>
</span><span class='line'>      <span class="k">else</span>
</span><span class='line'>        <span class="s2">&quot;unknown&quot;</span>
</span><span class='line'>      <span class="k">end</span>
</span><span class='line'>      <span class="n">classes</span> <span class="o">=</span> <span class="s2">&quot;class=&#39;level-tag level-tag-</span><span class="si">#{</span><span class="vi">@level</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
</span><span class='line'>      <span class="s2">&quot;&lt;div </span><span class="si">#{</span><span class="n">classes</span><span class="si">}</span><span class="s2">&gt;</span><span class="si">#{</span><span class="n">label</span><span class="si">}</span><span class="s2">&lt;span&gt;</span><span class="si">#{</span><span class="n">level</span><span class="si">}</span><span class="s2">&lt;/span&gt;&lt;/div&gt;&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Template</span><span class="o">.</span><span class="n">register_tag</span><span class="p">(</span><span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="ss">Jekyll</span><span class="p">:</span><span class="ss">:LevelTag</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>L&#8217;appel du plugin dans les articles sera maintenant réalisé comme ceci:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="p">{</span><span class="o">%</span> <span class="n">level</span> <span class="mi">1</span> <span class="o">%</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Par rapport à la première version, la méthode <code>render</code> a bien enflée. &ndash;
<em>Je trouve qu&#8217;il y a trop de code dedans, mais ce sera peut-être le sujet
d&#8217;un prochain article sur le refactoring.</em> &ndash; C&#8217;est cette méthode qui fait
tout le travail, voici les explications:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class='line'>  <span class="n">config</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">registers</span><span class="o">[</span><span class="ss">:site</span><span class="o">].</span><span class="n">config</span>
</span><span class='line'>  <span class="n">label</span> <span class="o">=</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;level_tag_level&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s2">&quot;Level: &quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>C&#8217;est l&#8217;objet <code>context</code> qui va permettre de récupérer les informations
nécéssaires dans le fichier de configuration <code>_config.yml</code>. Voici par
exemple ce que j&#8217;ai ajouté dans mon <code>_config.yml</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='yaml'><span class='line'><span class="c1"># LevelTag plugin</span>
</span><span class='line'><span class="l-Scalar-Plain">level_tag_level</span><span class="p-Indicator">:</span> <span class="s">&quot;Niveau</span><span class="nv"> </span><span class="s">:</span><span class="nv"> </span><span class="s">&quot;</span>
</span><span class='line'><span class="l-Scalar-Plain">level_tag_level_1</span><span class="p-Indicator">:</span> <span class="s">&quot;facile&quot;</span>
</span><span class='line'><span class="l-Scalar-Plain">level_tag_level_2</span><span class="p-Indicator">:</span> <span class="s">&quot;intermédiaire&quot;</span>
</span><span class='line'><span class="l-Scalar-Plain">level_tag_level_3</span><span class="p-Indicator">:</span> <span class="s">&quot;avancé&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>La ligne suivante:</p>

<pre><code>label = config['level_tag_level'] || "Level: "
</code></pre>

<p>initialise la
variable <code>label</code> avec le contenu de <code>level_tag_level</code>, trouvé dans le
<code>_config.yml</code>. La partie du code <code>|| "Level: "</code> est là pour s&#8217;assurer que
si <code>level_tag_level</code> n&#8217;existe pas dans le fichier de configuration, <code>label</code>
sera bien initialisé avec une valeur par défaut.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">level</span> <span class="o">=</span> <span class="k">case</span> <span class="vi">@level</span>
</span><span class='line'>  <span class="k">when</span> <span class="s2">&quot;1&quot;</span> <span class="k">then</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;level_tag_level_1&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s2">&quot;easy&quot;</span>
</span><span class='line'>  <span class="k">when</span> <span class="s2">&quot;2&quot;</span> <span class="k">then</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;level_tag_level_2&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s2">&quot;medium&quot;</span>
</span><span class='line'>  <span class="k">when</span> <span class="s2">&quot;3&quot;</span> <span class="k">then</span> <span class="n">config</span><span class="o">[</span><span class="s1">&#39;level_tag_level_3&#39;</span><span class="o">]</span> <span class="o">||</span> <span class="s2">&quot;hard&quot;</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="s2">&quot;unknown&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>C&#8217;est la même logique que précédement. La variable <code>level</code> sera initialisée
avec du contenu trouvé dans <code>_config.yml</code> ou bien, avec une valeur par
défaut.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'>  <span class="n">classes</span> <span class="o">=</span> <span class="s2">&quot;class=&#39;level-tag level-tag-</span><span class="si">#{</span><span class="vi">@level</span><span class="si">}</span><span class="s2">&#39;&quot;</span>
</span><span class='line'>  <span class="s2">&quot;&lt;div </span><span class="si">#{</span><span class="n">classes</span><span class="si">}</span><span class="s2">&gt;</span><span class="si">#{</span><span class="n">label</span><span class="si">}</span><span class="s2">&lt;span&gt;</span><span class="si">#{</span><span class="n">level</span><span class="si">}</span><span class="s2">&lt;/span&gt;&lt;/div&gt;&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Finalement, comme dans <a href="http://lkdjiin.github.io/blog/2013/07/27/comment-ecrire-un-plugin-octopress/">la première partie</a>,
on retrouve en fin de méthode la production du code Html.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Bien débuter avec Vim: conseil numéro six]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/29/bien-debuter-avec-vim-conseil-numero-six/"/>
    <updated>2013-07-29T08:05:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/29/bien-debuter-avec-vim-conseil-numero-six</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<h2>Ne mettez pas n&#8217;importe quoi dans votre .vimrc</h2>

<p>Le fichier <code>.vimrc</code> est LE fichier de configuration de Vim. C&#8217;est dans ce fichier
que vous personnaliserez votre Vim. C&#8217;est donc un fichier très important et on
peut être tenté d&#8217;utiliser celui de quelqu&#8217;un d&#8217;autre. Ne le faites surtout pas
!</p>

<!-- more -->


<p>Vim est un éditeur hautement configurable, paramétrable et personnalisable.
Je peux utiliser le Netbeans ou le Notepad++ de mon collègue mais
j&#8217;aurai du mal à utiliser son Vim, tellement il est différent du mien. C&#8217;est ce
qui fait la force de Vim, il fini par vous ressembler… À la fin du tutoriel
intégré, vous aurez un fichier <code>.vimrc</code> très suffisant pour commencer. Et vous
devriez suivre une règle simple :</p>

<blockquote><p>Ajoutez une ligne à votre .vimrc uniquement si vous comprenez cette ligne.</p></blockquote>


<p>Il y a bien sûr des exceptions. Par exemple, si votre clavier est loin
de la disposition <em>azerty</em> ou <em>qwerty</em> (comme moi qui suis en <em>bépo</em>) vous
serez bien
obligé de remapper un certain nombre de touches dès le début. Je vous conseille
aussi fortement de désactiver les touches fléchées. En effet leur usage est
tellement ancré dans nos têtes que vous les utiliserez sans vous en rendre
compte, ce qui ne pourrait que vous ralentir dans votre progression.
Pour cela, ajoutez les lignes suivantes dans votre <code>.vimrc</code> :</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='vim'><span class='line'><span class="c">&quot; Les touches fléchées sont désactivées.</span>
</span><span class='line'><span class="c">&quot; Utile pour apprendre vim.</span>
</span><span class='line'><span class="c">&quot;</span>
</span><span class='line'><span class="c">&quot; En mode normal, vous pourrez les utiliser plus tard</span>
</span><span class='line'><span class="c">&quot; pour faire quelque chose d&#39;utile.</span>
</span><span class='line'><span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">up</span><span class="p">&gt;</span> <span class="p">&lt;</span>nop<span class="p">&gt;</span>
</span><span class='line'><span class="nb">nnoremap</span> <span class="p">&lt;</span>down<span class="p">&gt;</span> <span class="p">&lt;</span>nop<span class="p">&gt;</span>
</span><span class='line'><span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">left</span><span class="p">&gt;</span> <span class="p">&lt;</span>nop<span class="p">&gt;</span>
</span><span class='line'><span class="nb">nnoremap</span> <span class="p">&lt;</span><span class="k">right</span><span class="p">&gt;</span> <span class="p">&lt;</span>nop<span class="p">&gt;</span>
</span><span class='line'><span class="c">&quot; En mode insertion, vous pourrez enlever la</span>
</span><span class='line'><span class="c">&quot; désactivation dans quelques semaines.</span>
</span><span class='line'><span class="nb">inoremap</span> <span class="p">&lt;</span><span class="k">up</span><span class="p">&gt;</span> <span class="p">&lt;</span>nop<span class="p">&gt;</span>
</span><span class='line'><span class="nb">inoremap</span> <span class="p">&lt;</span>down<span class="p">&gt;</span> <span class="p">&lt;</span>nop<span class="p">&gt;</span>
</span><span class='line'><span class="nb">inoremap</span> <span class="p">&lt;</span><span class="k">left</span><span class="p">&gt;</span> <span class="p">&lt;</span>nop<span class="p">&gt;</span>
</span><span class='line'><span class="nb">inoremap</span> <span class="p">&lt;</span><span class="k">right</span><span class="p">&gt;</span> <span class="p">&lt;</span>nop<span class="p">&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>N&#8217;hésitez pas à consulter l&#8217;aide de vim pour bien comprendre ce que font ces
lignes de code <em>avant</em> de les ajouter dans votre <code>.vimrc</code> ;)</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Pattern matching avec Elixir: une première approche]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/28/pattern-matching-avec-elixir-une-premiere-approche/"/>
    <updated>2013-07-28T13:32:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/28/pattern-matching-avec-elixir-une-premiere-approche</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>Une tâche réccurente quand on utilise la récursivité pour résoudre un problème
est de séparer une liste en deux parties. La première partie étant le premier
élément de la liste et la seconde partie étant ce qui reste. Pour faire cela,
on peut utiliser le <em>pattern matching</em>, qu&#8217;on peut traduire par filtrage à
l&#8217;aide de motifs.</p>

<!-- more -->


<p>Voyons la syntaxe pour séparer une liste en deux:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="p">[</span><span class="n">head</span> <span class="o">|</span> <span class="n">tail</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">3</span><span class="p">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Après ça, <code>head</code> (la tête) vaut 1 et <code>tail</code> (la queue) vaut [2, 3].
Maintenant les cas exceptionnels: Si on passe une liste d&#8217;un seul élément,
<code>tail</code> sera une liste vide ([]). Si on passe une liste vide, et bien c&#8217;est
une erreur. Voici une capture d&#8217;écran qui montre le résultat:</p>

<p><img src="http://lkdjiin.github.io/images/2013-07-28-1.jpg" width="890" height="577" title="pattern matching avec Elixir" ></p>

<p>Pour illustrer le <em>pattern matching</em> je vais écrire un module avec une fonction
<code>minimum</code> qui doit trouver le plus petit élément dans une liste de nombres
entiers.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defmodule</span> <span class="no">Stats</span> <span class="k">do</span>
</span><span class='line'><span class="k">  def</span> <span class="n">minimum</span><span class="p">([</span><span class="n">head</span><span class="o">|</span><span class="n">tail</span><span class="p">])</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">minimum</span> <span class="n">tail</span><span class="p">,</span> <span class="n">head</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">defp</span> <span class="n">minimum</span><span class="p">([],</span> <span class="n">candidate</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">candidate</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">defp</span> <span class="n">minimum</span><span class="p">([</span><span class="n">head</span><span class="o">|</span><span class="n">tail</span><span class="p">],</span> <span class="n">candidate</span><span class="p">)</span> <span class="ow">when</span> <span class="n">head</span> <span class="o">&lt;</span> <span class="n">candidate</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">minimum</span> <span class="n">tail</span><span class="p">,</span> <span class="n">head</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">defp</span> <span class="n">minimum</span><span class="p">([</span><span class="n">_</span><span class="o">|</span><span class="n">tail</span><span class="p">],</span> <span class="n">candidate</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">minimum</span> <span class="n">tail</span><span class="p">,</span> <span class="n">candidate</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>On peut l&#8217;utiliser comme ceci:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="no">Stats</span><span class="o">.</span><span class="n">minimum</span><span class="p">([</span><span class="m">1</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="o">-</span><span class="m">9</span><span class="p">,</span> <span class="m">3</span><span class="p">])</span>
</span></code></pre></td></tr></table></div></figure>


<p>Voici une explication des différentes fonctions:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'>  <span class="k">def</span> <span class="n">minimum</span><span class="p">([</span><span class="n">head</span><span class="o">|</span><span class="n">tail</span><span class="p">])</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">minimum</span> <span class="n">tail</span><span class="p">,</span> <span class="n">head</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Le <em>pattern matching</em> s&#8217;applique directement dans les arguments de la
fonction. Pour cette première passe, on considère que <code>head</code> est à priori
la plus petite valeur de la série.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'>  <span class="k">defp</span> <span class="n">minimum</span><span class="p">([],</span> <span class="n">candidate</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">candidate</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Là, c&#8217;est la clause de sortie de la fonction <code>minimum</code>. Si la liste est
vide, c&#8217;est qu&#8217;on à trouvé la valeur minimum (<code>candidate</code>).</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'>  <span class="k">defp</span> <span class="n">minimum</span><span class="p">([</span><span class="n">head</span><span class="o">|</span><span class="n">tail</span><span class="p">],</span> <span class="n">candidate</span><span class="p">)</span> <span class="ow">when</span> <span class="n">head</span> <span class="o">&lt;</span> <span class="n">candidate</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">minimum</span> <span class="n">tail</span><span class="p">,</span> <span class="n">head</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Quand la liste est encore remplie, on compare la valeur de tête à notre
valeur candidate. Je rappelle que <code>candidate</code> est à ce moment la plus petite
valeur trouvée jusqu&#8217;ici. Si la valeur de <code>head</code> est plus petite que
la valeur de <code>candidate</code>, la première remplace la dernière.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'>  <span class="k">defp</span> <span class="n">minimum</span><span class="p">([</span><span class="n">_</span><span class="o">|</span><span class="n">tail</span><span class="p">],</span> <span class="n">candidate</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">minimum</span> <span class="n">tail</span><span class="p">,</span> <span class="n">candidate</span>
</span><span class='line'>  <span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Dans les autres cas, la valeur de tête n&#8217;a pas d&#8217;intérêt, ce que souligne
le caractère <code>_</code> dans <code>[_|tail]</code>. On remplace une variable par <code>_</code>
lorsque cette variable est inutilisée.</p>

<p>Nouveau venu en programmation fonctionnelle, je pense que je n&#8217;entrevois là
que la surface du <em>pattern matching</em>.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Comment écrire un plugin Octopress]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/27/comment-ecrire-un-plugin-octopress/"/>
    <updated>2013-07-27T12:56:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/27/comment-ecrire-un-plugin-octopress</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>Pour mon blog Octopress, je voulais un repère visuel qui marque le niveau de
difficulté des articles. Un truc comme «Niveau : débutant» ou bien «Niveau :
confirmé» avec un peu de couleur. Rien de bien compliqué en fait. Si passer par
l&#8217;écriture d&#8217;un plugin pour obtenir ce genre d&#8217;effet n&#8217;est pas absolument
neccéssaire, ça rendra l&#8217;écriture des articles plus agréable et plus
rapide. Et puis je vais apprendre quelque chose de nouveau : comment écrire
un plugin pour Octopress ?</p>

<!-- more -->


<p>Tout d&#8217;abord, le site d&#8217;Octopress ne propose pas de documentation sur
l&#8217;écriture de plugins. Par contre, le wiki fournit
<a href="https://github.com/imathis/octopress/wiki/3rd-party-plugins">une longue liste de plugins</a>
 dont les sources sont les bienvenues. Jekyll, le programme sur lequel est
construit Octopress, est assez spartiate en ce qui concerne
<a href="http://jekyllrb.com/docs/plugins/">l&#8217;écriture de plugin pour Jekyll</a>. Malgré
tout, ce lien peut s&#8217;avérer utile. J&#8217;ai trouvé que la meilleure source
d&#8217;information pour commencer est le contenu du dossier <code>plugin</code> de votre
blog Octopress.</p>

<p>Si vous voulez tout de suite jetez un coup d&#8217;oeil sur le
<a href="https://github.com/lkdjiin/octopress-level-tag/releases">code source du plugin</a>
terminé, vous pouvez le trouver sur Github, à la version 0.1.0.</p>

<p>Démarront avec le plugin le plus simple auquel je puisse penser. Créer un
fichier <code>plugins/level_tag.rb</code> et placez y le contenu suivant:</p>

<figure class='code'><figcaption><span>plugins/level_tag.rb</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">LevelTag</span> <span class="o">&lt;</span> <span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Tag</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class='line'>      <span class="s2">&quot;Niveau : facile&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Template</span><span class="o">.</span><span class="n">register_tag</span><span class="p">(</span><span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="ss">Jekyll</span><span class="p">:</span><span class="ss">:LevelTag</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ensuite, dans un post, appelez le plugin de cette façon:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="p">{</span><span class="o">%</span> <span class="n">level</span> <span class="o">%</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Puis lancez Octopress:</p>

<pre><code>rake generate
rake preview
</code></pre>

<p>Pointez votre navigateur sur <code>localhost:4000</code> et voilà. Un beau label
«Niveau : facile» apparait dans votre post. Voyons maintenant comment ça
marche.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">LevelTag</span> <span class="o">&lt;</span> <span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Tag</span>
</span></code></pre></td></tr></table></div></figure>


<p>Un plugin pour Octopress est avant tout un plugin pour Jekyll.
Et Jekyll se sert du
<a href="http://rubydoc.info/gems/liquid">moteur de template Liquid</a>. Notre classe
<code>LevelTag</code> va donc hériter de <code>Liquid::Tag</code>, et être placée dans le
module Jekyll. La classe <code>Liquid::Tag</code> nous offre tout ce qu&#8217;il faut
pour générer du html, récupérer des arguments, etc.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class='line'>  <span class="s2">&quot;Niveau : facile&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>La seule méthode de <code>Liquid::Tag</code> qu&#8217;il faut absolument implémenter est
<code>render</code>. C&#8217;est elle qui va produire le code html qui sera placé dans
notre article, à la place de l&#8217;appel du plugin.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Template</span><span class="o">.</span><span class="n">register_tag</span><span class="p">(</span><span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="ss">Jekyll</span><span class="p">:</span><span class="ss">:LevelTag</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Finalement, il faut enregistrer notre plugin auprès de <code>Liquid::Template</code>.
Le premier argument passé à <code>register_tag</code> est le nom sous lequel nous
voulons appeler le plugin dans nos articles. Le second argument est la
classe de notre plugin.</p>

<p>Pour aller plus loin, il va falloir passer des arguments depuis l&#8217;appel du
plugin jusqu&#8217;à notre classe <code>LevelTag</code>. On change donc l&#8217;appel ainsi:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="p">{</span><span class="o">%</span> <span class="n">level</span> <span class="n">facile</span> <span class="o">%</span><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Et on transforme le plugin de cette façon:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">module</span> <span class="nn">Jekyll</span>
</span><span class='line'>  <span class="k">class</span> <span class="nc">LevelTag</span> <span class="o">&lt;</span> <span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Tag</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tagname</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
</span><span class='line'>      <span class="vi">@level</span> <span class="o">=</span> <span class="n">level</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class='line'>      <span class="s2">&quot;Niveau : </span><span class="si">#{</span><span class="vi">@level</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="ss">Liquid</span><span class="p">:</span><span class="ss">:Template</span><span class="o">.</span><span class="n">register_tag</span><span class="p">(</span><span class="s1">&#39;level&#39;</span><span class="p">,</span> <span class="ss">Jekyll</span><span class="p">:</span><span class="ss">:LevelTag</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Voyons les changements en détails.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">tagname</span><span class="p">,</span> <span class="n">level</span><span class="p">,</span> <span class="n">tokens</span><span class="p">)</span>
</span><span class='line'>  <span class="vi">@level</span> <span class="o">=</span> <span class="n">level</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>La variable <code>level</code> va contenir l&#8217;argument passé lors de l&#8217;appel du
plugin (<code>facile</code>), donc <code>level == 'facile'</code>. On sauvegarde
cette valeur dans un membre pour pouvoir la réutiliser plus tard.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="k">def</span> <span class="nf">render</span><span class="p">(</span><span class="n">context</span><span class="p">)</span>
</span><span class='line'>  <span class="s2">&quot;Niveau : </span><span class="si">#{</span><span class="vi">@level</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Grâce à <code>@level</code> on a les moyens de faire sortir à <code>render</code> l&#8217;argument
passé lors de l&#8217;appel du plugin.</p>

<p>Comme certains voudront «Niveau : facile» et d&#8217;autres voudront
«Niveau : débutant», il va nous falloir un moyen de personnaliser tout ça.
C&#8217;est ce qu&#8217;on découvrira dans un prochain numéro.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Bien débuter avec Vim: conseil numéro cinq]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/26/bien-debuter-avec-vim-conseil-numero-cinq/"/>
    <updated>2013-07-26T07:43:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/26/bien-debuter-avec-vim-conseil-numero-cinq</id>
    <content type="html"><![CDATA[<h2>Suivez le tutoriel intégré en prenant des notes</h2>

<p>La première chose à faire, quand vous décidez de passer sur vim,
c&#8217;est de suivre le tutoriel intégré de A à Z.
Ne vous contentez pas seulement de le lire, faites tout les exercices à fond.
Le tutoriel est progressif et très bien écrit.</p>

<!-- more -->


<p>Pour le lancer:</p>

<pre><code>vimtutor
</code></pre>

<p>En français:</p>

<pre><code>vimtutor fr
</code></pre>

<p>Vous voulez une version graphique (<a href="http://lkdjiin.github.io/blog/2013/07/19/bien-debuter-avec-vim-conseil-numero-quatre/">et vous auriez raison</a>):</p>

<pre><code>gvimtutor
</code></pre>

<p>Quelqu&#8217;un a écrit dans le tutoriel que celui-ci vous prendra 30 minutes. Soit
cette personne est un génie, soit nombre de leçons ont été ajoutées depuis.
Personnellement, j&#8217;ai souvenir d&#8217;y avoir passé une matinée complête, en faisant
consiencieusement chaque exercice et en prenant des notes à chaque étapes.</p>

<p>Je vous conseille vraiment de prendre des notes. J&#8217;ai trouvé que ça m&#8217;aidait
à apprendre plus rapidement de nouvelles commandes. Aujourd&#8217;hui encore, quand
j&#8217;installe un nouveau plugin, je note toutes les commandes que je trouve utiles
sur une feuille de papier. Cette feuille reste sur mon bureau le temps
qu&#8217;il faut pour que j&#8217;utilise ces commandes sans y penser.</p>

<p>Une fois le tutoriel fini, vous possédez les bases de vim … et une montagne
de notes qui vous seront utiles dans les semaines qui vont suivre.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Le problème des 100 portes en Elixir]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/25/le-probleme-des-100-portes-en-elixir/"/>
    <updated>2013-07-25T07:35:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/25/le-probleme-des-100-portes-en-elixir</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-2'>Niveau : <span>intermédiaire</span></div>


<p>Je continue mon périple parmi le <a href="http://rosettacode.org/wiki/">rosetta code</a>
en m&#8217;attaquant au problème des «100 doors».</p>

<blockquote><p>Problem: You have 100 doors in a row that are all initially closed. You make 100 passes by the doors. The first time through, you visit every door and toggle the door (if the door is closed, you open it; if it is open, you close it). The second time you only visit every 2nd door (door #2, #4, #6, &#8230;). The third time, every 3rd door (door #3, #6, #9, &#8230;), etc, until you only visit the 100th door.</p><p>Question: What state are the doors in after the last pass? Which are open, which are closed?</p><footer><strong>Rosetta Code</strong> <cite><a href='http://rosettacode.org/wiki/100_doors'>100 doors</a></cite></footer></blockquote>




<!-- more -->


<p>Je me dis que je vais d&#8217;abord le faire dans un langage que je connais bien
pour voir de quoi il retourne, et si il n&#8217;y a pas de pièges cachés. En
quelques lignes de Ruby, le tour est joué:</p>

<figure class='code'><figcaption><span>100 doors en Ruby</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="n">doors</span> <span class="o">=</span> <span class="nb">Array</span><span class="o">.</span><span class="n">new</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="p">(</span><span class="mi">1</span><span class="o">.</span><span class="n">.</span><span class="mi">100</span><span class="p">)</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">interval</span><span class="o">|</span>
</span><span class='line'>  <span class="n">doors</span><span class="o">.</span><span class="n">map!</span><span class="o">.</span><span class="n">with_index</span> <span class="k">do</span> <span class="o">|</span><span class="n">elem</span><span class="p">,</span> <span class="n">idx</span><span class="o">|</span>
</span><span class='line'>    <span class="p">(</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">interval</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">?</span> <span class="o">!</span><span class="n">elem</span> <span class="p">:</span> <span class="n">elem</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="c1"># Écrire le numéro des portes ouvertes.</span>
</span><span class='line'><span class="n">doors</span><span class="o">.</span><span class="n">each_with_index</span> <span class="p">{</span><span class="o">|</span><span class="n">e</span><span class="p">,</span> <span class="n">i</span><span class="o">|</span> <span class="nb">puts</span> <span class="n">i</span><span class="o">+</span><span class="mi">1</span> <span class="k">if</span> <span class="n">e</span> <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Voyant cela j&#8217;ai pensé que ça allait être assez simple à implémenter en
Elixir. Pas du tout. J&#8217;ai galéré longtemps avant de trouver la solution qui
va suivre. Mon plus gros problème avec Elixir est que les variables sont
non-mutables. Une fois définie, une variable ne change pas. Il faut donc
faire appel constament à la récursivité. Je ne nie pas les avantages d&#8217;un
tel système (pas d&#8217;effets de bords) mais ce n&#8217;est pas évident de s&#8217;y faire quand
on vient comme moi du monde procédural ou objet. Trêve de baratin, voici
ma solution avec Elixir:</p>

<figure class='code'><figcaption><span>100 doors en Elixir</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defmodule</span> <span class="no">Doors</span> <span class="k">do</span>
</span><span class='line'>
</span><span class='line'><span class="k">  def</span> <span class="n">soluce</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">doors</span> <span class="o">=</span> <span class="no">Enum</span><span class="o">.</span><span class="n">map</span> <span class="m">1</span><span class="o">..</span><span class="m">100</span><span class="p">,</span> <span class="k">fn</span> <span class="n">_</span> <span class="o">-&gt;</span> <span class="no">false</span> <span class="k">end</span>
</span><span class='line'>    <span class="n">run</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">defp</span> <span class="n">run</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span> <span class="n">interval</span><span class="p">)</span> <span class="ow">when</span> <span class="n">interval</span> <span class="o">&gt;</span> <span class="m">100</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">doors</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">defp</span> <span class="n">run</span> <span class="n">doors</span><span class="p">,</span> <span class="n">interval</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">run</span><span class="p">(</span><span class="n">switch_doors</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span><span class="n">interval</span><span class="p">),</span> <span class="n">interval</span> <span class="o">+</span> <span class="m">1</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">defp</span> <span class="n">switch_doors</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span> <span class="n">interval</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">stream</span> <span class="o">=</span> <span class="no">Stream</span><span class="o">.</span><span class="n">with_index</span><span class="p">(</span><span class="n">doors</span><span class="p">)</span>
</span><span class='line'>    <span class="n">list</span> <span class="o">=</span> <span class="no">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
</span><span class='line'>    <span class="no">Enum</span><span class="o">.</span><span class="n">map</span> <span class="n">list</span><span class="p">,</span> <span class="k">fn</span> <span class="n">e</span> <span class="o">-&gt;</span>
</span><span class='line'>      <span class="n">door</span> <span class="o">=</span> <span class="n">elem</span> <span class="n">e</span><span class="p">,</span> <span class="m">0</span>
</span><span class='line'>      <span class="n">index</span> <span class="o">=</span> <span class="n">elem</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span> <span class="m">1</span>
</span><span class='line'>      <span class="n">switch_door</span> <span class="n">rem</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">interval</span><span class="p">),</span> <span class="n">door</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">defp</span> <span class="n">switch_door</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">door</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="ow">not</span> <span class="n">door</span>
</span><span class='line'>  <span class="k">defp</span> <span class="n">switch_door</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">door</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="n">door</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="n">soluce</span> <span class="o">=</span> <span class="no">Doors</span><span class="o">.</span><span class="n">soluce</span>
</span><span class='line'><span class="no">Enum</span><span class="o">.</span><span class="n">each</span> <span class="no">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p">(</span><span class="no">Stream</span><span class="o">.</span><span class="n">with_index</span><span class="p">(</span><span class="n">soluce</span><span class="p">)),</span> <span class="k">fn</span> <span class="n">e</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">elem</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span> <span class="o">==</span> <span class="no">true</span><span class="p">,</span> <span class="k">do</span><span class="p">:</span> <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="n">elem</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span> <span class="m">1</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Plutôt long comparé à la version Ruby, hein ? Quoiqu&#8217;il en soit, j&#8217;en suis
fier, j&#8217;ai mis du temps à la pondre, cette version. Je pense que quelqu&#8217;un
connaissant bien Elixir doit pouvoir nettement améliorer mon code. Je
vais le poster sur la mailing-list et demander ce qu&#8217;il en
pense. Si j&#8217;ai des retours (ce dont je ne doute pas) je mettrais la
version améliorée dans un prochain article. En attendant je vais
commenter un peu mon code pour l&#8217;expliquer.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">def</span> <span class="n">soluce</span> <span class="k">do</span>
</span><span class='line'><span class="k">  </span><span class="n">doors</span> <span class="o">=</span> <span class="no">Enum</span><span class="o">.</span><span class="n">map</span> <span class="m">1</span><span class="o">..</span><span class="m">100</span><span class="p">,</span> <span class="k">fn</span> <span class="n">_</span> <span class="o">-&gt;</span> <span class="no">false</span> <span class="k">end</span>
</span><span class='line'>  <span class="n">run</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>soluce</code> est la seule fonction publique du module. Elle initialise une liste
de 100 éléments avec la valeur <code>false</code>. Puis elle commence le travail avec
<code>run(doors, 1)</code>, <code>1</code> étant le premier intervalle de la série, c&#8217;est à dire
qu&#8217;on passe par toutes les portes. Une fois la solution découverte, elle est
renvoyée explicitement. Si vous connaissez Ruby, vous savez à quoi je fais
référence, sinon, sachez qu&#8217;en Elixir toutes les fonctions renvoie une valeur,
et qu&#8217;on a pas besoin de l&#8217;indiquer. C&#8217;est implicite, la dernière évaluation
est renvoyée. Notez aussi l&#8217;usage de <code>_</code> qui indique qu&#8217;on se fiche du contenu
de la variable.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defp</span> <span class="n">run</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span> <span class="n">interval</span><span class="p">)</span> <span class="ow">when</span> <span class="n">interval</span> <span class="o">&gt;</span> <span class="m">100</span> <span class="k">do</span>
</span><span class='line'><span class="k">  </span><span class="n">doors</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">defp</span> <span class="n">run</span> <span class="n">doors</span><span class="p">,</span> <span class="n">interval</span> <span class="k">do</span>
</span><span class='line'><span class="k">  </span><span class="n">run</span><span class="p">(</span><span class="n">switch_doors</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span><span class="n">interval</span><span class="p">),</span> <span class="n">interval</span> <span class="o">+</span> <span class="m">1</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>La première version de <code>run</code> comporte un <em>guard</em>. Elle n&#8217;est utilisée que
lorsque <code>interval</code> est supérieur à 100. C&#8217;est notre clause de sortie de la
fonction récursive.</p>

<p>La seconde version de <code>run</code> est utilisée dans tout les autres cas. Elle se
contente de s&#8217;appeller elle-même (récursivité) avec une liste des portes
mise à jour et un intervalle incrémenté.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defp</span> <span class="n">switch_doors</span><span class="p">(</span><span class="n">doors</span><span class="p">,</span> <span class="n">interval</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">  </span><span class="n">stream</span> <span class="o">=</span> <span class="no">Stream</span><span class="o">.</span><span class="n">with_index</span><span class="p">(</span><span class="n">doors</span><span class="p">)</span>
</span><span class='line'>  <span class="n">list</span> <span class="o">=</span> <span class="no">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
</span><span class='line'>  <span class="no">Enum</span><span class="o">.</span><span class="n">map</span> <span class="n">list</span><span class="p">,</span> <span class="k">fn</span> <span class="n">e</span> <span class="o">-&gt;</span>
</span><span class='line'>    <span class="n">door</span> <span class="o">=</span> <span class="n">elem</span> <span class="n">e</span><span class="p">,</span> <span class="m">0</span>
</span><span class='line'>    <span class="n">index</span> <span class="o">=</span> <span class="n">elem</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span> <span class="m">1</span>
</span><span class='line'>    <span class="n">switch_door</span> <span class="n">rem</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">interval</span><span class="p">),</span> <span class="n">door</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>switch_doors</code> est responsable de fabriquer une nouvelle liste de portes.
C&#8217;est la fonction qui m&#8217;a tenu en échec pendant des heures, jusqu&#8217;à ce que
je découvre le module <code>Stream</code>. Voyons <code>switch_doors</code> en détails:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="n">stream</span> <span class="o">=</span> <span class="no">Stream</span><span class="o">.</span><span class="n">with_index</span><span class="p">(</span><span class="n">doors</span><span class="p">)</span>
</span><span class='line'><span class="n">list</span> <span class="o">=</span> <span class="no">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p">(</span><span class="n">stream</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Je crée une nouvelle liste qui va embarquer les valeurs de <code>doors</code>
en les associant aux indexs. <code>list</code> va ressembler à ça:</p>

<pre><code>[{false, 0}, {false, 1}, {false, 2}, ... {false, 99}]
</code></pre>

<p>Qui en Elixir peut aussi être représenté ainsi:</p>

<pre><code>[false: 0, false: 1 ...
</code></pre>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="no">Enum</span><span class="o">.</span><span class="n">map</span> <span class="n">list</span><span class="p">,</span> <span class="k">fn</span> <span class="n">e</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="n">door</span> <span class="o">=</span> <span class="n">elem</span> <span class="n">e</span><span class="p">,</span> <span class="m">0</span>
</span><span class='line'>  <span class="n">index</span> <span class="o">=</span> <span class="n">elem</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span> <span class="m">1</span>
</span><span class='line'>  <span class="n">switch_door</span> <span class="n">rem</span><span class="p">(</span><span class="n">index</span><span class="p">,</span> <span class="n">interval</span><span class="p">),</span> <span class="n">door</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>Enum.map</code> fabrique et renvoie une nouvelle version de la liste des portes.
Chaque élément de <code>list</code> (chaque <code>{false, 0}</code>) passe à travers une fonction
anonyme qui renvoie false ou true, selon le résultat de index modulo interval.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defp</span> <span class="n">switch_door</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">door</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="ow">not</span> <span class="n">door</span>
</span><span class='line'><span class="k">defp</span> <span class="n">switch_door</span><span class="p">(</span><span class="n">_</span><span class="p">,</span> <span class="n">door</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="n">door</span>
</span></code></pre></td></tr></table></div></figure>


<p>Si le modulo égal zéro, on inverse l&#8217;état de la porte. Sinon la porte doit
rester dans le même état.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="no">Enum</span><span class="o">.</span><span class="n">each</span> <span class="no">Enum</span><span class="o">.</span><span class="n">to_list</span><span class="p">(</span><span class="no">Stream</span><span class="o">.</span><span class="n">with_index</span><span class="p">(</span><span class="n">soluce</span><span class="p">)),</span> <span class="k">fn</span> <span class="n">e</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="k">if</span> <span class="n">elem</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span> <span class="o">==</span> <span class="no">true</span><span class="p">,</span> <span class="k">do</span><span class="p">:</span> <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="n">elem</span><span class="p">(</span><span class="n">e</span><span class="p">,</span> <span class="m">1</span><span class="p">)</span> <span class="o">+</span> <span class="m">1</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>J&#8217;écris les numéros des portes ouvertes. Avec mes explications qui précèdent,
j&#8217;espère que vous pourrez comprendre comment ça marche.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Elixir: calculer la somme des n premiers entiers - suite et fin]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/24/elixir-calculer-la-somme-des-n-premiers-entiers-suite-et-fin/"/>
    <updated>2013-07-24T07:35:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/24/elixir-calculer-la-somme-des-n-premiers-entiers-suite-et-fin</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p><a href="http://lkdjiin.github.io/blog/2013/07/23/elixir-calculer-la-somme-des-n-premiers-entiers/">Hier</a>,
je me suis arrêté sur cette version:</p>

<figure class='code'><figcaption><span>somme.exs version 1</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defmodule</span> <span class="no">Somme</span> <span class="k">do</span>
</span><span class='line'><span class="k">  def</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">somme</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="n">acc</span>
</span><span class='line'>    <span class="n">suivant</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="m">1</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">suivant</span> <span class="o">==</span> <span class="m">0</span> <span class="k">do</span>
</span><span class='line'><span class="k">      </span><span class="n">somme</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="n">run</span><span class="p">(</span><span class="n">suivant</span><span class="p">,</span> <span class="n">somme</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="no">Somme</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Aujourd&#8217;hui je vais raffiner ce programme petit à petit pour montrer
quelques possibilités intéressantes du langage Elixir.</p>

<!-- more -->


<p>Pour commencer, je vais reécrire le if/else sur une seule ligne:</p>

<figure class='code'><figcaption><span>somme.exs version 2</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defmodule</span> <span class="no">Somme</span> <span class="k">do</span>
</span><span class='line'><span class="k">  def</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">somme</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="n">acc</span>
</span><span class='line'>    <span class="n">suivant</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="m">1</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">suivant</span> <span class="o">==</span> <span class="m">0</span><span class="p">,</span> <span class="k">do</span><span class="p">:</span> <span class="n">somme</span><span class="p">,</span> <span class="k">else</span><span class="p">:</span> <span class="n">run</span><span class="p">(</span><span class="n">suivant</span><span class="p">,</span> <span class="n">somme</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="no">Somme</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ça ne change rien à la logique du programme. Je voulais seulement vous montrer
une alternative. Il semblerait qu&#8217;Elixir n&#8217;aime pas trop les if, moi non plus
ça tombe bien. Dans la version suivante, qui pourra vous paraitre très étrange
de prime abord, je me débarasse de ce if/else qui pollue mon joli code:</p>

<figure class='code'><figcaption><span>somme.exs version 3</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defmodule</span> <span class="no">Somme</span> <span class="k">do</span>
</span><span class='line'><span class="k">  def</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span> <span class="ow">when</span> <span class="n">n</span> <span class="o">==</span> <span class="m">0</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">acc</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">run</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="m">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="n">acc</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="no">Somme</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ça peut surprendre, hein ? La condition qui était précédement dans le <code>if</code> se
retrouve dans la définition de la fonction:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">def</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span> <span class="ow">when</span> <span class="n">n</span> <span class="o">==</span> <span class="m">0</span> <span class="k">do</span>
</span></code></pre></td></tr></table></div></figure>


<p>C&#8217;est ce qu&#8217;Elixir appelle un <em>guard</em>. Cette version de la fonction <code>run</code> sera
exécutée uniquement quand n vaut zéro. Dans les autres cas, c&#8217;est la seconde
version, généraliste, <code>run(n, acc) do</code> qui sera exécutée. Je ne sais pas si ce
truc existe dans d&#8217;autres langages, en tout cas je trouve ce comportement tout
simplement génial. Mais Elixir ne s&#8217;arrête pas là. Voici une nouvelle version:</p>

<figure class='code'><figcaption><span>somme.exs version 4</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defmodule</span> <span class="no">Somme</span> <span class="k">do</span>
</span><span class='line'><span class="k">  def</span> <span class="n">run</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">acc</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">run</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="m">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="n">acc</span><span class="p">)</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="no">Somme</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Cette fois le <em>guard</em> est passé directement dans un argument de la fonction:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">def</span> <span class="n">run</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span> <span class="k">do</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>def run(0, …</code> ne sera exécutée que quand le premier argument sera égal à zéro.
Et si on écrit les fonctions sur une seule ligne, on obtient un résultat très
compact:</p>

<figure class='code'><figcaption><span>somme.exs version 5</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defmodule</span> <span class="no">Somme</span> <span class="k">do</span>
</span><span class='line'><span class="k">  def</span> <span class="n">run</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">acc</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="n">acc</span>
</span><span class='line'>  <span class="k">def</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">acc</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="m">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="n">acc</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="no">Somme</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Il reste encore une chose à prendre en compte: l&#8217;API. Devoir passer deux
arguments à la méthode <code>run</code> n&#8217;est pas très intuitif. Comme la valeur initiale
de l&#8217;accumulateur est toujours zéro, on s&#8217;arrange pour la cacher à
l&#8217;utilisateur:</p>

<figure class='code'><figcaption><span>somme.exs version 6</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defmodule</span> <span class="no">Somme</span> <span class="k">do</span>
</span><span class='line'><span class="k">  def</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="n">run_body</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
</span><span class='line'>  <span class="k">defp</span> <span class="n">run_body</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="n">acc</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="n">acc</span>
</span><span class='line'>  <span class="k">defp</span> <span class="n">run_body</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">acc</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="n">run_body</span><span class="p">(</span><span class="n">n</span> <span class="o">-</span> <span class="m">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="n">acc</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="no">Somme</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="m">5</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p><code>run</code> est maintenant une fonction <em>bootstrap</em> qui sert à amorcer le vrai
travail. Mes deux anciennes fonctions <code>run</code> sont renommées <code>run_body</code> et
passe dans l&#8217;espace privé du module grâce à <code>defp</code>.
Pour finir, il faut noter qu&#8217;Elixir connait bien évidemment une
fonction <code>reduce</code>, et que le programme pourrait donc s&#8217;écrire comme ça:</p>

<figure class='code'><figcaption><span>somme.exs version 7</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defmodule</span> <span class="no">Somme</span> <span class="k">do</span>
</span><span class='line'><span class="k">  def</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="k">do</span><span class="p">:</span> <span class="no">Enum</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="m">1</span><span class="o">..</span><span class="n">n</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="k">fn</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">x</span> <span class="o">+</span> <span class="n">acc</span> <span class="k">end</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'><span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="no">Somme</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="m">5</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Mais avouez que ça aurait été moins drôle si j&#8217;avais commencé directement
par là.</p>

<p>Voilà, c&#8217;était un petit exemple de fonction récursive qui m&#8217;a permit de vous
montrer certaines particularités d&#8217;Elixir.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Elixir: calculer la somme des n premiers entiers]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/23/elixir-calculer-la-somme-des-n-premiers-entiers/"/>
    <updated>2013-07-23T07:43:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/23/elixir-calculer-la-somme-des-n-premiers-entiers</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>Pour illustrer la programmation récursive avec Elixir et montrer quelques
aspects sympathiques du langage, j&#8217;ai choisi un classique et très simple
problème mathématique: calculer la somme des n premiers entiers.
Par exemple:</p>

<pre><code>Somme des n premiers entiers si n vaut 5

5 + 4 + 3 + 2 + 1 = 15
</code></pre>

<p>Super simple. C&#8217;est comme la factorielle mais avec des additions. Pas de quoi
choper des boutons, même si on déteste les maths. C&#8217;est un bon problème pour
illustrer les fonctions récursives. En programmation procédurale on ferait
quelque chose dans ce genre là:</p>

<pre><code>somme = 0
for(i = n; i &gt; 0; i--) {
  somme += n
}
</code></pre>

<p>Ma première tentative avec Elixir donne le programme suivant:</p>

<!-- more -->




<figure class='code'><figcaption><span>somme.exs version 1</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defmodule</span> <span class="no">Somme</span> <span class="k">do</span>
</span><span class='line'>
</span><span class='line'><span class="k">  def</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="n">somme</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="n">acc</span>
</span><span class='line'>    <span class="n">suivant</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="m">1</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">suivant</span> <span class="o">==</span> <span class="m">0</span> <span class="k">do</span>
</span><span class='line'><span class="k">      </span><span class="n">somme</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="n">run</span><span class="p">(</span><span class="n">suivant</span><span class="p">,</span> <span class="n">somme</span><span class="p">)</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="no">Somme</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="m">5</span><span class="p">,</span> <span class="m">0</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>Vous le lancez comme ça:</p>

<pre><code>$ elixir somme.exs 
15
</code></pre>

<p><strong>Sachez dès maintenant que ce bout de code n&#8217;est pas dans l&#8217;esprit
Elixir.</strong>  J&#8217;ai cherché à décomposer toutes les étapes, pas à faire quelque chose
de beau, ou d&#8217;optimisé, ou de compact. Alors, que fais ce programme ?</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">def</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span> <span class="k">do</span>
</span></code></pre></td></tr></table></div></figure>


<p>C&#8217;est la définition d&#8217;une méthode <code>run</code>. Le paramètre <code>acc</code> est le diminutif de
accumulator. Avoir un accumulateur est un truc très utilisé dans ce type de
fonction. On enregistre le résultat provisioire dans cet accumulateur, qui
est propagé tout au long de la pile d&#8217;appels.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="n">somme</span> <span class="o">=</span> <span class="n">n</span> <span class="o">+</span> <span class="n">acc</span>
</span><span class='line'><span class="n">suivant</span> <span class="o">=</span> <span class="n">n</span> <span class="o">-</span> <span class="m">1</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ici je calcule deux résultats temporaires. Dans <code>somme</code> je place la somme du
nombre n actuel et de l&#8217;accumulateur. Quant à <code>suivant</code>, il contient la
prochaine valeur du nombre n.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">if</span> <span class="n">suivant</span> <span class="o">==</span> <span class="m">0</span> <span class="k">do</span>
</span><span class='line'><span class="k">  </span><span class="n">somme</span>
</span><span class='line'><span class="k">else</span>
</span><span class='line'>  <span class="n">run</span><span class="p">(</span><span class="n">suivant</span><span class="p">,</span> <span class="n">somme</span><span class="p">)</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Dans une fonction récursive il faut évidemment un appel à cette même fonction.
Mais surtout il faut une
condition de sortie. Sans ce garde-fou, c&#8217;est la boucle infinie à tout les
coups. Ici la condition de sortie est <code>suivant == 0</code>. Quand le prochain nombre
à traiter atteint zéro, c&#8217;est le signe que la fonction a terminé son travail donc
je renvois le résultat actuel, qui est la somme de tous les nombres traités
jusqu&#8217;ici. Dans l&#8217;autre cas, c&#8217;est l&#8217;appel récursif: <code>run(suivant, somme)</code>.</p>

<p>Si vous avez du mal à comprendre la logique de ce programme, vous pouvez
ajouter un traçage:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defmodule</span> <span class="no">Somme</span> <span class="k">do</span>
</span><span class='line'><span class="k">  def</span> <span class="n">run</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">acc</span><span class="p">)</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;n: </span><span class="si">#{</span><span class="n">n</span><span class="si">}</span><span class="s2"> --- acc: </span><span class="si">#{</span><span class="n">acc</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class='line'>    <span class="c1"># ...</span>
</span></code></pre></td></tr></table></div></figure>


<p>Ce qui donnera le résultat suivant:</p>

<pre><code>$ elixir somme.exs 
n: 5 --- acc: 0
n: 4 --- acc: 5
n: 3 --- acc: 9
n: 2 --- acc: 12
n: 1 --- acc: 14
15
</code></pre>

<p>La prochaine fois je transformerais ce programme afin qu&#8217;il soit dans
l&#8217;esprit Elixir.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Mon premier programme Elixir]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/22/mon-premier-programme-elixir/"/>
    <updated>2013-07-22T07:52:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/22/mon-premier-programme-elixir</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>Pour apprendre Elixir, j&#8217;ai décidé de faire quelques tâches tirées du
<a href="http://rosettacode.org/wiki/Category:Programming_Tasks">rosetta code</a>.
Pour mon tout premier programme, je commence avec un classique: 99 bottles of beer.</p>

<!-- more -->


<p>Vous connaissez la chanson ? Le but du jeu est d&#8217;obtenir ça:</p>

<pre><code>99 bottles of beer on the wall
99 bottles of beer
Take one down, pass it around
98 bottle of beer on the wall

...

1 bottle of beer on the wall
1 bottle of beer
Take one down, pass it around
0 bottles of beer on the wall
</code></pre>

<p>C&#8217;est parti. &ndash; <em>N&#8217;oubliez pas que c&#8217;est mon premier programme Elixir, le code
sera forcement maladroit.</em> &ndash; D&#8217;abord une version sans tenir compte du pluriel de &ldquo;bottle&rdquo;.</p>

<figure class='code'><figcaption><span>99_bottle_of_beer_v1.exs</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="no">Enum</span><span class="o">.</span><span class="n">each</span> <span class="m">99</span><span class="o">..</span><span class="m">1</span><span class="p">,</span> <span class="k">fn</span> <span class="n">idx</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">idx</span><span class="si">}</span><span class="s2"> bottles of beer on the wall&quot;</span>
</span><span class='line'>  <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">idx</span><span class="si">}</span><span class="s2"> bottles of beer&quot;</span>
</span><span class='line'>  <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;Take one down, pass it around&quot;</span>
</span><span class='line'>  <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">idx</span> <span class="o">-</span> <span class="m">1</span><span class="si">}</span><span class="s2"> bottles of beer on the wall&quot;</span>
</span><span class='line'>  <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>On lance le programme comme ça:</p>

<pre><code>elixir 99_bottle_of_beer_v1.exs
</code></pre>

<p>Il y a pas mal de ressemblance avec Ruby. Notamment, l&#8217;interpolation
des chaînes de caractères est identique:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">idx</span><span class="si">}</span><span class="s2"> bottles of beer on the wall&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>La fameuse méthode <code>puts</code> de Ruby est utilisée pour sortir du texte.
Le fait que <code>puts</code> soit appelée d&#8217;un module <code>IO</code> me rappelle un peu
Java.
Voyons maintenant l&#8217;itération:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="no">Enum</span><span class="o">.</span><span class="n">each</span> <span class="m">99</span><span class="o">..</span><span class="m">1</span><span class="p">,</span> <span class="k">fn</span> <span class="n">idx</span> <span class="o">-&gt;</span>
</span><span class='line'>  <span class="c1"># ...</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Tiens, on a déjà un truc qui ressemble à un pattern: <code>Module.méthode</code>. On
a vu <code>IO.puts</code>, on a maintenant <code>Enum.each</code>. On va donc itérer sur un <em>range</em>
<code>99..1</code>, et appliquer une fonction à chaque élément de ce <em>range</em>. La
fonction, anonyme, avec un argument, débute par <code>fn idx -&gt;</code> ; <code>idx</code> prenant
à chaque itération la valeur de l&#8217;élément courant du <em>range</em>.</p>

<p>Je m&#8217;intéresse maintenant à une version qui tient compte du pluriel.</p>

<figure class='code'><figcaption><span>99_bottle_of_beer_v2.exs</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">defmodule</span> <span class="no">Bottles</span> <span class="k">do</span>
</span><span class='line'><span class="k">  def</span> <span class="n">run</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="no">Enum</span><span class="o">.</span><span class="n">each</span> <span class="m">99</span><span class="o">..</span><span class="m">1</span><span class="p">,</span> <span class="k">fn</span> <span class="n">idx</span> <span class="o">-&gt;</span>
</span><span class='line'>      <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">idx</span><span class="si">}</span><span class="s2"> bottle</span><span class="si">#{</span><span class="n">plural</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span><span class="si">}</span><span class="s2"> of beer on the wall&quot;</span>
</span><span class='line'>      <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">idx</span><span class="si">}</span><span class="s2"> bottle</span><span class="si">#{</span><span class="n">plural</span><span class="p">(</span><span class="n">idx</span><span class="p">)</span><span class="si">}</span><span class="s2"> of beer&quot;</span>
</span><span class='line'>      <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;Take one down, pass it around&quot;</span>
</span><span class='line'>      <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;</span><span class="si">#{</span><span class="n">idx</span> <span class="o">-</span> <span class="m">1</span><span class="si">}</span><span class="s2"> bottle</span><span class="si">#{</span><span class="n">plural</span><span class="p">(</span><span class="n">idx</span><span class="o">-</span><span class="m">1</span><span class="p">)</span><span class="si">}</span><span class="s2"> of beer on the wall&quot;</span>
</span><span class='line'>      <span class="no">IO</span><span class="o">.</span><span class="n">puts</span> <span class="s2">&quot;&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">def</span> <span class="n">plural</span> <span class="n">num</span> <span class="k">do</span>
</span><span class='line'><span class="k">    if</span> <span class="n">num</span> <span class="o">==</span> <span class="m">1</span> <span class="k">do</span>
</span><span class='line'><span class="k">      </span><span class="s2">&quot;&quot;</span>
</span><span class='line'>    <span class="k">else</span>
</span><span class='line'>      <span class="s2">&quot;s&quot;</span>
</span><span class='line'>    <span class="k">end</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span><span class='line'>
</span><span class='line'><span class="no">Bottles</span><span class="o">.</span><span class="n">run</span>
</span></code></pre></td></tr></table></div></figure>


<p>J&#8217;ai du enfermer mes fonctions dans un module, avec <code>defmodule</code>, puisqu&#8217;il
n&#8217;est pas permis d&#8217;utiliser <code>def</code> en dehors d&#8217;un module. L&#8217;intérieur de
la fonction <code>run</code> ne diffère pas vraiment de la version précédente.
La fonction <code>plural</code> est intéressante à commenter:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='elixir'><span class='line'><span class="k">def</span> <span class="n">plural</span> <span class="n">num</span> <span class="k">do</span>
</span><span class='line'><span class="k">  if</span> <span class="n">num</span> <span class="o">==</span> <span class="m">1</span> <span class="k">do</span>
</span><span class='line'><span class="k">    </span><span class="s2">&quot;&quot;</span>
</span><span class='line'>  <span class="k">else</span>
</span><span class='line'>    <span class="s2">&quot;s&quot;</span>
</span><span class='line'>  <span class="k">end</span>
</span><span class='line'><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure>


<p>Comme avec Ruby, les arguments n&#8217;ont pas besoin d&#8217;être enfermés entre
parenthèses, mais on peut le faire. Pas besoin non plus d&#8217;un mot-clé
<code>return</code>, une fonction renvoie toujours une valeur, même de manière
implicite. Pour définir une fonction on utilise:
<code>def name args do</code>. Le <code>if</code> prends aussi un <code>do</code> à la fin. Elixir semble
en fait être assez cohérent et homogène:</p>

<pre><code>defmodule ... do ... end
def       ... do ... end
if        ... do ... end
</code></pre>

<p>Enfin, l&#8217;appel de la fonction <code>run</code> est sans surprise: <code>Bottles.run</code>. Je note
que je ne sais pas encore à quoi j&#8217;ai affaire avec les modules. Est-ce-qu&#8217;un
module est juste un espace de nommage ? Est-ce-qu&#8217;un module est plus qu&#8217;un
espace de nommage ?</p>

<p>Voilà pour une première approche d&#8217;Elixir, un langage qui ressemble
beaucoup à Ruby, et en même temps pas vraiment ;)</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Installer le langage Elixir]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/21/installer-le-langage-elixir/"/>
    <updated>2013-07-21T08:56:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/21/installer-le-langage-elixir</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>Ça fait quelques jours que j&#8217;essaie de faire des petits programmes avec
Elixir. J&#8217;entends parler de ce nouveau langage depuis plusieurs mois déjà, et
je n&#8217;avais pas encore eu le temps de m&#8217;amuser un peu avec. C&#8217;est chose
faite. Elixir est un langage dynamique, fonctionnel, concurrent, immuable
et on dit qu&#8217;il ressemble beaucoup à Ruby. C&#8217;est l&#8217;occasion pour moi de
débuter une série d&#8217;articles consacrés à Elixir. Ça commence aujourd&#8217;hui
avec l&#8217;installation.</p>

<!-- more -->


<p><em>Je vais décrire l&#8217;installation pour Debian, mais ça ne semble pas être
bien différent sur d&#8217;autres OS.</em></p>

<h2>Installer d&#8217;abord Erlang</h2>

<p>Elixir est bati au-dessus du langage Erlang, il faut donc tout d&#8217;abord
installer le compilateur Erlang avant d&#8217;installer Elixir à proprement parler.
La version R16B minimum est requise.
La marche à suivre est indiqué sur la page
<a href="https://www.erlang-solutions.com/downloads/download-erlang-otp">download-erlang-otp</a>.
Pour résumer, on ajoute la ligne suivante au fichier <code>/etc/apt/sources.list</code>:</p>

<pre><code>deb http://binaries.erlang-solutions.com/debian squeeze contrib
</code></pre>

<p>Puis on installe la clé:</p>

<pre><code>wget -O - http://binaries.erlang-solutions.com/debian/erlang_solutions.asc \ 
| sudo apt-key add -
</code></pre>

<p>Après y-a-pu-ka:</p>

<pre><code>apt-get update
apt-get install esl-erlang
</code></pre>

<p>On s&#8217;assure que l&#8217;installation est bien réalisée:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>xavier:~<span class="nv">$ </span>erl
</span><span class='line'>Erlang R16B01 <span class="o">(</span>erts-5.10.2<span class="o">)</span> <span class="o">[</span><span class="nb">source</span>-bdf5300<span class="o">]</span> <span class="o">[</span>smp:2:2<span class="o">]</span> <span class="o">[</span>async-threads:10<span class="o">]</span> <span class="o">[</span>hipe<span class="o">]</span> <span class="o">[</span>kernel-poll:false<span class="o">]</span>
</span><span class='line'>
</span><span class='line'>Eshell V5.10.2  <span class="o">(</span>abort with ^G<span class="o">)</span>
</span><span class='line'>1&gt;
</span></code></pre></td></tr></table></div></figure>


<h2>Installer Elixir</h2>

<p>Voilà Erlang est installé, c&#8217;est maintenant au tour d&#8217;Elixir proprement dit.
Pas de chance, il n&#8217;y a pas de package pour Debian, je dois donc installer
à partir des <a href="https://github.com/elixir-lang/elixir/tags">sources</a>. C&#8217;est
aussi simple que de décompresser l&#8217;archive et de taper <code>make</code>. À ce moment
là j&#8217;ai quand même un petit doute: pas de dépendances, de lib à installer ?
Mais je comprends vite que c&#8217;est Erlang qui est en train de compiler Elixir.
Donc non, tout va bien et ça marche du premier coup. Un petit truc quand
même, Elixir étant installé en local, il faut modifier la variable <code>PATH</code>
du shell pour pas galérer:</p>

<figure class='code'><figcaption><span>.bashrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/home/xavier/local/bin/elixir-0.9.3/bin/
</span></code></pre></td></tr></table></div></figure>


<p>Reste à voir si ça fonctionne vraiment:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>xavier:~<span class="nv">$ </span>iex
</span><span class='line'>Erlang R16B01 <span class="o">(</span>erts-5.10.2<span class="o">)</span> <span class="o">[</span><span class="nb">source</span>-bdf5300<span class="o">]</span> <span class="o">[</span>smp:2:2<span class="o">]</span> <span class="o">[</span>async-threads:10<span class="o">]</span> <span class="o">[</span>hipe<span class="o">]</span> <span class="o">[</span>kernel-poll:false<span class="o">]</span>
</span><span class='line'>
</span><span class='line'>Interactive Elixir <span class="o">(</span>0.9.3<span class="o">)</span> - press Ctrl+C to <span class="nb">exit</span> <span class="o">(</span><span class="nb">type </span>h<span class="o">()</span> ENTER <span class="k">for </span><span class="nb">help</span><span class="o">)</span>
</span><span class='line'>iex<span class="o">(</span>1<span class="o">)</span>&gt; 1+1
</span><span class='line'>2
</span><span class='line'>iex<span class="o">(</span>2<span class="o">)</span>&gt;
</span></code></pre></td></tr></table></div></figure>


<p>Cool ! L&#8217;installation s&#8217;est déroulée à merveille, tout marche du premier
coup. C&#8217;est bon signe ou pas ?</p>

<h2>Mise à jour d&#8217;Elixir</h2>

<p>Il sort pratiquement une nouvelle version d&#8217;Elixir par mois ; je sens
que les mises à jour vont faire partie de ma vie d&#8217;elixiriste (oui je
l&#8217;ai inventé celui-là, comment vous diriez ? Elixirien ?)
En fait, en
écrivant cet article, je m&#8217;aperçois que la version 0.10.0 est sortie.
C&#8217;est donc ma première mise à jour. Après le téléchargement,
la décompression et le <code>make</code>, il suffit d&#8217;accommoder le <code>PATH</code>:</p>

<figure class='code'><figcaption><span>.bashrc</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/home/xavier/local/bin/elixir-0.10.0/bin/
</span></code></pre></td></tr></table></div></figure>


<p>Et la nouvelle version est prête à l&#8217;emploi. Si Elixir est aussi sympa que son
installation, ça promet. Affaire à suivre.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Modern IE pour Linux: foutage de gueule]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/20/modern-ie-pour-linux-foutage-de-gueule/"/>
    <updated>2013-07-20T08:44:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/20/modern-ie-pour-linux-foutage-de-gueule</id>
    <content type="html"><![CDATA[<p><strong>Question:</strong> «Que doit faire régulièrement un développeur du web ?»</p>

<p><strong>Réponse:</strong> «Tester le rendu de son site sur plusieurs navigateurs.»</p>

<p>Internet Explorer fait partie du lot. Qu&#8217;on le veuille ou non, il faut
tester nos sites dans IE, même quand on travaille sur Linux.
Au début de l&#8217;année, Microsoft a lancé
<a href="http://www.modern.ie/fr">Modern.IE</a>. L&#8217;ancien site tout moche où on
téléchargait les VMs qui ne fonctionnaient que sur Windows à fait place
à un site moderne, new look, qui te
promet (dixit le dit site):</p>

<blockquote><p>Facilitez vos tests pour Internet Explorer</p></blockquote>




<!-- more -->


<p>On te dis qu&#8217;on va bien s&#8217;occuper de toi. J&#8217;ai eu envie d&#8217;y croire alors
j&#8217;ai essayé. Ce qui m&#8217;intéresse ce sont les outils de virtualisation, alors
rendez vous sur la page <a href="http://www.modern.ie/fr/virtualization-tools.">http://www.modern.ie/fr/virtualization-tools.</a> Voici
ce qu&#8217;on peut y lire:</p>

<blockquote><p>Testez votre site. Dans tout navigateur sur un Mac ou un ordinateur Windows.</p></blockquote>


<p>Ça aurait du me mettre la puce à l&#8217;oreille mais je continue quand même.
Deux clics plus tard, j&#8217;obtiens la liste des VMs pour Linux/VirtualBox.
Premier constat: la taille des VMs, toujours aussi gargantuesque,
5 ou 6 gigas pour certaines.
Bon, c&#8217;est pas ça qui va m&#8217;arrêter, mais faut quand même savoir que leur
serveur ne supporte pas le resume…</p>

<p>Quelques heures plus tard, mission accomplie, IE 9 est téléchargé. Je
lance le script d&#8217;install qui tente de décompresser la bête.
Mais non. Comment ça, non ? Ben non, fichier corrompu (!?). J&#8217;ai un peu la nausée à l&#8217;idée de devoir
re-télécharger 5 Go. J&#8217;essaye de les décompresser avec
deux trois programmes classiques que j&#8217;ai sous la main. Rien à faire.
Corrompu…</p>

<p>Retour sur le site Modern.IE pour trouver ça: «Need more help downloading and installing the VMs?
<a href="http://blog.reybango.com/2013/02/04/making-internet-explorer-testing-easier-with-new-ie-vms/">Try Rey Bango’s blog</a>.»</p>

<p>Ok je fais ça. Qu&#8217;est-ce-que j&#8217;y apprends:</p>

<blockquote><p>A number of people have mentioned that they’ve had trouble unzipping the<br/>images and that they may be corrupt. They’re not corrupt. There’s an issue in<br/>both OSX & Linux where using the OS’s default zip tool is failing to open the<br/>.zip file properly. We’re aware of this and are looking into it. The interim<br/>solution is to use a 3rd party unzip tool like “The Unarchiver” in the Apple<br/>app store or Peazip for Linux. These will correctly unzip the .zip files and<br/>give you working images.</p></blockquote>


<p>Traduction rapide (et sûrement un peu maladroite) pour les non-anglophones, accrochez vous, ça vaut son
pesant de cacahuètes:</p>

<blockquote><p>Plusieurs personnes ont rapporté avoir des problèmes à décompresser les images<br/>et que celles-ci pouvaient être corrompues. Elles ne sont pas corrompues. Il y<br/>a un problème dans OSX et Linux, qui empêche d&#8217;ouvrir proprement les fichiers<br/>zip avec les outils par défaut de l&#8217;OS. On est au courant de ça et on regarde<br/>ce qu&#8217;on peut faire. La solution provisoire est d&#8217;utiliser un outil de<br/>décompression tiers, comme &#8220;The Unarchiver&#8221; dans l&#8217;app store ou bien Peazip<br/>pour Linux. Ces outils décompresseront correctement les zip et produiront des<br/>images qui fonctionnent.</p></blockquote>


<p>Sans rire !? C&#8217;est tout ce que Microsoft a à dire la-dessus ? «C&#8217;est pas
nous, m&#8217;sieur, c&#8217;est encore la faute à OSX et Linux tout ça.»
Vous m&#8217;imaginez dire ça au boulot:</p>

<p>  <strong>Client:</strong> Il y a un problème avec le site, il fonctionne correctement dans
IE mais des utilisateurs nous ont rapporté qu&#8217;il s&#8217;affichait mal avec
Chrome et Firefox.</p>

<p>  <strong>Moi:</strong> Non, il ne s&#8217;affiche pas mal, il y a juste un problème avec Firefox et Chrome
qui empêche mon site de s&#8217;afficher correctement. En attendant que je corrige
ça, vos utilisateurs peuvent toujours regarder le site avec IE.</p>

<p>Le post date de février, c&#8217;est toujours pas corrigé. La suite de l&#8217;histoire
maintenant: Je n&#8217;ai jamais entendu
parler de ce <em>Peazip</em>, je cherche un peu et fini par l&#8217;installer. Après 10
minutes d&#8217;essais infructeux, pendant lesquelles j&#8217;ai du essuyer à peu près
40 bugs (sans rire), je le désinstalle et j&#8217;abandonne.
J&#8217;ai perdu
mon temps mais c&#8217;est de ma faute, qu&#8217;est ce qui m&#8217;a pris de croire
que Microsoft s&#8217;interessait aux utilisateurs de Linux ?</p>

<p>Pour ceux et celles qui se demande quelle est la solution, c&#8217;est la même que depuis
des années: <a href="https://github.com/xdissent/ievms">ievms</a> le script qui fonctionne.</p>

<p>À demain.</p>

<p><em>P.S. Ça fait des mois que je pense à écrire cet article. Ça fait du bien
quand ça sort.</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Bien débuter avec Vim: conseil numéro quatre]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/19/bien-debuter-avec-vim-conseil-numero-quatre/"/>
    <updated>2013-07-19T07:46:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/19/bien-debuter-avec-vim-conseil-numero-quatre</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<h2>Utilisez une version graphique</h2>

<p>Utilisez une version graphique de vim, comme gVim sous Linux et Windows, ou
MacVim sous MacOS, plutôt que la version pour terminal.  À ceci 3 raisons:</p>

<!-- more -->


<p>Tout d&#8217;abord, une version graphique de Vim vous permettra d&#8217;utiliser votre
police de caractère et votre jeu de couleur préféré sans problème. Dans un
terminal, c&#8217;est pas gagné.</p>

<p>Ensuite, une version graphique vous donnera accès à une classique barre
de menu. C&#8217;est tout bête, mais au début ça rassure.</p>

<p>Enfin, la barre d&#8217;outils fournit trois icônes très utiles pour les
débutants: copier, couper, coller. Pendant la phase d&#8217;apprentissage,
vous serez très heureux d&#8217;avoir ces icônes sous la main pour
échanger du texte depuis Vim vers une autre application et vice-versa. C&#8217;est
donc une exception à mon conseil numéro 2:
<a href="http://lkdjiin.github.io/blog/2013/07/12/bien-debuter-avec-vim-conseil-numero-deux/">Abandonnez la souris</a>.
Bien sûr, Vim possède des commandes au
clavier pour faire ça, mais son système de clipboard/buffer très puissant est
complexe et s&#8217;avère franchement déroutant pour le novice.
En temps que débutant vous aurez
bien assez de choses à apprendre comme ça sans vous en rajouter une couche.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Comment étendre Git avec ses propres scripts: la suite]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/18/comment-etendre-git-avec-ses-propres-scripts-la-suite/"/>
    <updated>2013-07-18T07:39:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/18/comment-etendre-git-avec-ses-propres-scripts-la-suite</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p><em>Hier j&#8217;ai montré comment ajouter une commande à Git à l&#8217;aide d&#8217;un script.
Aujourd&#8217;hui je fais quelque chose d&#8217;utile grâce à ce nouveau pouvoir.</em></p>

<p>Ce que je fais régulierement avec Git c&#8217;est:</p>

<ol>
<li>ajouter une fonctionnalité dans la branche <code>ma_branche</code></li>
<li>quand c&#8217;est terminé, passer sur la branche <code>master</code></li>
<li>fusionner <code>ma_branche</code> dans <code>master</code></li>
</ol>


<p>Comme je ne travaille jamais directement dans la branche master, ce genre
de <em>merge</em> n&#8217;offre jamais de conflits. J&#8217;aimerais regrouper les
étapes 2 et 3 en une seule commande: <code>git merge-me</code>.</p>

<!-- more -->


<h2>Trouver la branche courante</h2>

<p>La première étape consiste à retrouver
et retenir le nom de la branche courante. Étant un grand fan de Sed, je
procederais naturellement comme ça:</p>

<pre><code>git branch | sed -n '/\* /s///p'
</code></pre>

<p>Mais je sais que Sed n&#8217;a pas les faveurs de tout le monde. J&#8217;ai donc fais une
recherche sur StackOverflow pour trouver une autre manière d&#8217;obtenir le
même résultat:</p>

<pre><code>git rev-parse --abbrev-ref HEAD
</code></pre>

<p>Je pense que cette seconde solution est meilleure puisque moins fragile, même
si il y a peu de chance que Git change la sortie de <code>git branch</code>. Pour
retenir le nom de la branche, on place la sortie de cette commande dans une
variable Bash:</p>

<figure class='code'><figcaption><span>git-merge-me</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nv">BRANCH_TO_MERGE</span><span class="o">=</span><span class="sb">`</span>git rev-parse --abbrev-ref HEAD<span class="sb">`</span>
</span><span class='line'><span class="nb">echo</span> <span class="nv">$BRANCH_TO_MERGE</span>
</span></code></pre></td></tr></table></div></figure>


<p>Comme en Ruby, les backticks déclenchent la commande et retournent sa
sortie. Le résultat:</p>

<pre><code>xavier:~$ git merge-me
ma_branche
</code></pre>

<p>Maintenant que j&#8217;ai vu que ça fonctionnait bien, le reste est un jeu
d&#8217;enfant.</p>

<h2>Le script final</h2>

<p>On ajoute les deux commandes Git, ce qui donne:</p>

<figure class='code'><figcaption><span>git-merge-me</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nv">BRANCH_TO_MERGE</span><span class="o">=</span><span class="sb">`</span>git rev-parse --abbrev-ref HEAD<span class="sb">`</span>
</span><span class='line'>git checkout master
</span><span class='line'>git merge <span class="nv">$BRANCH_TO_MERGE</span>
</span></code></pre></td></tr></table></div></figure>


<p>Et voici le script en action:</p>

<pre><code>xavier:~$ git merge-me
Switched to branch 'master'
Updating 48540e6..c584593
Fast-forward
 TODO |    1 +
 1 files changed, 1 insertions(+), 0 deletions(-)
xavier:~$ git branch
* master
  ma_branche
</code></pre>

<p>Ma nouvelle commande fait bien le travail que je lui demande.</p>

<h2>Pour aller plus loin</h2>

<p>Vous n&#8217;êtes pas limité à l&#8217;utilisation de Bash. Vous pouvez utiliser le
langage que vous voulez. À titre d&#8217;exemple, voici l&#8217;équivalent du script
précédent, cette fois en Ruby.
Toutefois comme ce genre de script va utiliser beaucoup de commandes
système, Ruby n&#8217;est peut-être pas le mieux placé. À vous de voir.</p>

<figure class='code'><figcaption><span>git-merge-me version Ruby</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='ruby'><span class='line'><span class="c1">#!/usr/bin/env ruby</span>
</span><span class='line'>
</span><span class='line'><span class="n">branch_to_merge</span> <span class="o">=</span> <span class="sb">`git rev-parse --abbrev-ref HEAD`</span>
</span><span class='line'><span class="nb">system</span> <span class="s1">&#39;git checkout master&#39;</span>
</span><span class='line'><span class="nb">system</span> <span class="s2">&quot;git merge </span><span class="si">#{</span><span class="n">branch_to_merge</span><span class="o">.</span><span class="n">chomp</span><span class="si">}</span><span class="s2">&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>On peut aussi combiner script et alias. On donne un nom bien explicite
à notre fichier, comme <code>git-merge-me-into-master</code> et on crée un alias
<code>mm = merge-me-into-master</code>. Ainsi on a une commande rapide sous les
doigts et on peut facilement retrouver le fichier grâce à son nom quand
on doit le modifier.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Comment étendre Git avec ses propres scripts]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/17/comment-etendre-git-avec-ses-propres-scripts/"/>
    <updated>2013-07-17T08:03:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/17/comment-etendre-git-avec-ses-propres-scripts</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-1'>Niveau : <span>facile</span></div>


<p>Ces derniers jours j&#8217;ai montré comment étendre les fonctionnalités
de Git à l&#8217;aide des alias (voir les 2 articles précédents). Aujourd&#8217;hui
on passe à la suite logique avec la création de nos propres scripts pour
Git.</p>

<p><em>Ce qui suit fonctionne sur Linux et MacOS. Je ne sais pas si c&#8217;est
possible sur Windows.</em></p>

<!-- more -->


<p>Un exemple vaut parfois mieux qu&#8217;un long discours. Alors créez donc le fichier
<code>git-hello</code> suivant:</p>

<figure class='code'><figcaption><span>git-hello</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="c">#!/bin/bash</span>
</span><span class='line'>
</span><span class='line'><span class="nb">echo </span>Hello
</span></code></pre></td></tr></table></div></figure>


<p>Donnez lui les droits d&#8217;exécution (<code>chmod +x git-hello</code>) et placez le dans
votre PATH. Moi je le place dans <code>~/bin/</code> et j&#8217;ajoute la ligne suivante à
<code>~/.bashrc</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">PATH</span><span class="o">=</span><span class="nv">$PATH</span>:/home/xavier/bin
</span></code></pre></td></tr></table></div></figure>


<p>Si vous n&#8217;êtes pas sous Linux, vous devrez adapter ces directives pour
votre OS. Une fois que c&#8217;est fait, vérifiez si tout fonctionne
correctement:</p>

<pre><code>xavier:~$ git-hello 
Hello
</code></pre>

<p>Maintenant vous vous dites peut-être <em>«Bon d&#8217;accord, il vient d&#8217;écrire un
script bidon, et alors ? Je vois toujours pas le rapport avec Git !»</em>
Le fichier qu&#8217;on vient d&#8217;écrire n&#8217;est pas nommé n&#8217;importe comment. Il
commence par <code>git-</code>. C&#8217;est ce qui va permettre à la magie d&#8217;opérer:</p>

<pre><code>xavier:~$ git h[Tab]
hello   help    hist    
xavier:~$ git hello
Hello
</code></pre>

<p>La même chose en différé live &ndash;<em> c&#8217;est mon dixième article sur ce blog,
je fête ça avec mon tout premier gif, je m&#8217;amuse comme je veux…</em> &ndash;</p>

<p><img src="http://lkdjiin.github.io/images/2013-07-17-1.gif"></p>

<p>La règle est simple:</p>

<blockquote><p>Un fichier nommé `git-foo` sera vu par Git comme étant une de ses propres<br/>commandes, nommée `foo`.</p></blockquote>


<p>C&#8217;est possible grâce à l&#8217;auto complétion programmable de Bash, dont je
parlerais une prochaine fois. Si vous avez défini des alias un peu
complexe, vous auriez peut-être avantage à les placez dans un script pour
profiter de la coloration syntaxique.
Demain, je montrerais un script un
peu plus utile et étoffé que celui-ci :) En attendant, testez vos propres idées.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Git et les alias: la suite]]></title>
    <link href="http://lkdjiin.github.io/blog/2013/07/16/git-et-les-alias-la-suite/"/>
    <updated>2013-07-16T09:10:00+02:00</updated>
    <id>http://lkdjiin.github.io/blog/2013/07/16/git-et-les-alias-la-suite</id>
    <content type="html"><![CDATA[<div class='level-tag level-tag-2'>Niveau : <span>intermédiaire</span></div>


<p><em>Hier, j&#8217;abordai les bases de la
<a href="http://lkdjiin.github.io/blog/2013/07/15/git-completion-automatique-et-alias-pour-debutants/">création d&#8217;alias avec Git</a>.
Aujourd&#8217;hui je pousse un peu plus loin en montrant comment intégrer
des commandes externes dans ces alias.</em></p>

<p>J&#8217;ai constaté récemment que j&#8217;utilisai énormément Git:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>xavier:~<span class="nv">$ </span>wc -l .bash_history
</span><span class='line'>500 .bash_history
</span><span class='line'>xavier:~<span class="nv">$ </span>sed -n <span class="s1">&#39;/^git/p&#39;</span> .bash_history | wc -l
</span><span class='line'>238
</span></code></pre></td></tr></table></div></figure>


<p>Sur 500 lignes d&#8217;historique, 238 sont consacrées à Git ! Ça m&#8217;a décidé
à approfondir la question des alias.</p>

<!-- more -->


<h2>L&#8217;opérateur !</h2>

<p>Git permet d&#8217;utiliser des commandes externes dans la définitions des
alias à l&#8217;aide de l&#8217;opérateur <code>!</code>. L&#8217;exemple qui suit est parfaitement
inutile mais illustre bien ce qui est possible.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='ini'><span class='line'><span class="k">[alias]</span>
</span><span class='line'>  <span class="na">ls</span> <span class="o">=</span> <span class="s">!ls</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>xavier:~<span class="nv">$ </span>git ls
</span><span class='line'>bin      Documents  Images            Modèles    Téléchargements   www
</span><span class='line'><span class="o">[</span>...<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>C&#8217;est pas tout, Git accepte aussi les arguments des commandes externes:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>xavier:~<span class="nv">$ </span>git ls -a
</span><span class='line'>.        .fonts       .javafx_eula_accepted   .remmina
</span><span class='line'><span class="o">[</span>...<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<p>Vous imaginez un peu ce qu&#8217;on va pouvoir faire avec ça ? Prenons un
workflow simple : nouvelle branche, ajout de fichier, commit, retour à au
master et merge.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>git checkout -b new_branch
</span><span class='line'><span class="c"># Édition du code</span>
</span><span class='line'>git add . <span class="c"># 1 fois sur 2 j&#39;oublie celle-là.</span>
</span><span class='line'>git commit -a
</span><span class='line'>git checkout master
</span><span class='line'>git merge new_branch
</span></code></pre></td></tr></table></div></figure>


<p>Il est clair que <code>git add . ; git commit -a</code> va se répéter plusieurs fois.
Je cherche donc a optimiser cette partie. Pour cela je modifie mon vieil
alias <code>ci</code> (<a href="http://lkdjiin.github.io/blog/2013/07/15/git-completion-automatique-et-alias-pour-debutants/">voir article précédent</a>).</p>

<p><em>Dans les exemples suivants, je n&#8217;écris plus <code>[alias]</code>, cette ligne est
désormais sous-entendue.</em></p>

<pre><code>ci = !git add . &amp;&amp; git commit -a
</code></pre>

<p>Git traite <code>git</code> comme une commande externe comme les autres &ndash;
<em>logique mais marrant</em> &ndash;, quant à <code>&amp;&amp;</code>, cela permet à Bash de n&#8217;exécuter
la commande de droite que si la commande de gauche réussie. Il n&#8217;y a pas
de raison de douter que <code>git add .</code> va crasher et vous pouvez remplacer
<code>&amp;&amp;</code> par <code>;</code> si vous voulez.</p>

<p>Pour finir sur une note d&#8217;humour de geek, voici la commande <code>la</code> (pour
list alias) qui va afficher tout les alias.</p>

<pre><code># Lister tout les alias.
la = !git config -l | sed -n '/alias/s/alias\\.//p' | sort
</code></pre>

<p>Tout d&#8217;abord <code>git</code> est utilisé pour lister le contenu du fichier .gitconfig.
Ensuite <code>sed</code> sélectionne seulement les lignes commençant par <code>alias</code> et en
même temps supprime <code>alias.</code> de la ligne. Et enfin <code>sort</code> nous trie tout
ça par ordre alphabétique. Notez au passage que le fichier <code>.gitconfig</code>
accepte les commentaires.</p>

<h2>Conclusion</h2>

<p>On a là un sacré terrain de jeu. Si vous aimez écrire des oneliners, vous
allez pouvoir vous amuser. Voici par exemple une page où vous trouverez
<a href="http://durdn.com/blog/2012/11/22/must-have-git-aliases-advanced-examples/">des définitions d&#8217;alias</a>
bien plus complexe que ce que j&#8217;ai montré ici.
Malgré tout, je ne pense pas que les alias de Git soient la réponse à tout
les problèmes.
Écrire une commande sur une seule ligne va vite devenir illisible si
vous avez besoin de faire quelque chose d&#8217;un peu élaboré. Dans un
prochain article je montrerais comment créer vos propres commandes Git
à l&#8217;aide de scripts, et non plus simplement d&#8217;alias.</p>

<p>À demain.</p>
]]></content>
  </entry>
  
</feed>
